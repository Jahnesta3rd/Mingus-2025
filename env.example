# Mingus Application - Security Configuration
# Copy this file to .env and update the values for your environment

# Flask Configuration
FLASK_APP=app.py
FLASK_ENV=development
SECRET_KEY=your-super-secret-key-change-in-production

# Security Configuration
CSRF_SECRET_KEY=your-csrf-secret-key-change-in-production
# ENCRYPTION_KEY: Generate a Fernet key using: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
# Or use a strong password (32+ characters) - the service will derive a key using PBKDF2
ENCRYPTION_KEY=your-encryption-key-change-in-production
RATE_LIMIT_PER_MINUTE=100
DB_ENCRYPTION_ENABLED=true
LOG_SENSITIVE_DATA=false

# Database Configuration
DATABASE_URL=sqlite:///app.db
DB_CONNECTION_TIMEOUT=30
DB_MAX_CONNECTIONS=20

# CORS Configuration
CORS_ORIGINS=http://localhost:3000,http://localhost:5173,http://127.0.0.1:3000
CORS_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_HEADERS=Content-Type,Authorization,X-CSRF-Token

# Session Security
SESSION_COOKIE_SECURE=false
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE=Strict
PERMANENT_SESSION_LIFETIME=86400

# Assessment Security
ASSESSMENT_MAX_ATTEMPTS=3
ASSESSMENT_COOLDOWN=300
ASSESSMENT_DATA_RETENTION_DAYS=365

# Logging Configuration
LOG_LEVEL=INFO
LOG_FILE=logs/app.log
LOG_MAX_SIZE=10485760
LOG_BACKUP_COUNT=5
LOG_DIR=logs

# Error Monitoring Configuration
# Enable Sentry error tracking (default: false)
ENABLE_SENTRY=false
# Sentry DSN (required if ENABLE_SENTRY=true)
# Get from https://sentry.io
SENTRY_DSN=
# Maximum number of errors to keep in memory (default: 10000)
MAX_ERROR_HISTORY=10000

# Error Alert Thresholds
# Critical errors per hour (default: 10)
ERROR_ALERT_CRITICAL_PER_HOUR=10
# High severity errors per hour (default: 50)
ERROR_ALERT_HIGH_PER_HOUR=50
# Total errors per hour (default: 200)
ERROR_ALERT_TOTAL_PER_HOUR=200

# Rate Limiting
RATE_LIMIT_STORAGE_URL=redis://localhost:6379/2
RATE_LIMIT_STRATEGY=fixed-window

# Redis Configuration
# Redis URL for sessions (database 0)
REDIS_SESSION_URL=redis://localhost:6379/0
# Redis URL for query caching (database 1)
REDIS_CACHE_URL=redis://localhost:6379/1
# Redis password (leave empty if no password is set)
REDIS_PASSWORD=

# System Monitoring Configuration
# Monitoring interval in seconds (default: 10)
MONITORING_INTERVAL=10
# Enable Prometheus metrics export (default: false)
ENABLE_PROMETHEUS=false
# Prometheus metrics server port (default: 9090)
PROMETHEUS_PORT=9090

# Alert Thresholds
# CPU usage percentage threshold (default: 80.0)
ALERT_CPU_THRESHOLD=80.0
# Memory usage percentage threshold (default: 85.0)
ALERT_MEMORY_THRESHOLD=85.0
# Disk usage percentage threshold (default: 90.0)
ALERT_DISK_THRESHOLD=90.0
# Error rate percentage threshold (default: 5.0)
ALERT_ERROR_RATE_THRESHOLD=5.0
# Response time milliseconds threshold (default: 1000.0)
ALERT_RESPONSE_TIME_THRESHOLD=1000.0
# Cache hit rate threshold (default: 0.70 = 70%)
ALERT_CACHE_HIT_RATE_THRESHOLD=0.70
# Redis URL for rate limiting (database 2) - can use same as RATE_LIMIT_STORAGE_URL
# REDIS_URL=redis://localhost:6379/0

# Security Headers
X_CONTENT_TYPE_OPTIONS=nosniff
X_FRAME_OPTIONS=DENY
X_XSS_PROTECTION=1; mode=block
STRICT_TRANSPORT_SECURITY=max-age=31536000; includeSubDomains
REFERRER_POLICY=strict-origin-when-cross-origin

# Content Security Policy
CSP_DEFAULT_SRC='self'
CSP_SCRIPT_SRC='self' 'unsafe-inline' 'unsafe-eval'
CSP_STYLE_SRC='self' 'unsafe-inline'
CSP_IMG_SRC='self' data: https:
CSP_FONT_SRC='self' data:
CSP_CONNECT_SRC='self'
CSP_FRAME_ANCESTORS='none'

# Input Validation
MAX_EMAIL_LENGTH=254
MAX_NAME_LENGTH=100
MAX_PHONE_LENGTH=15
MAX_ANSWER_LENGTH=1000
MAX_ANSWERS_SIZE=10000

# Email Configuration (for assessment results)
SMTP_SERVER=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your-email@gmail.com
SMTP_PASSWORD=your-app-password
EMAIL_FROM=noreply@mingus.com
EMAIL_FROM_NAME=Mingus Team

# Analytics Configuration
ANALYTICS_ENABLED=true
ANALYTICS_RETENTION_DAYS=90
ANALYTICS_BATCH_SIZE=100

# Monitoring Configuration
MONITORING_ENABLED=true
HEALTH_CHECK_INTERVAL=60
PERFORMANCE_MONITORING=true

# Backup Configuration
BACKUP_ENABLED=true
BACKUP_INTERVAL=24
BACKUP_RETENTION_DAYS=30
BACKUP_STORAGE_PATH=database_backups

# Development Settings
DEBUG=false
TESTING=false
DEVELOPMENT_MODE=false

# Production Settings (uncomment for production)
# FLASK_ENV=production
# SESSION_COOKIE_SECURE=true
# DEBUG=false
# LOG_LEVEL=WARNING