# =============================================================================
# MINGUS Production Environment Configuration
# Plaid Integration - Production Environment
# =============================================================================

# =============================================================================
# PL AID CONFIGURATION - PRODUCTION
# =============================================================================

# Environment Selection
PLAID_ENV=production

# Plaid API Credentials - Production Environment
PLAID_PRODUCTION_CLIENT_ID=your_production_client_id_here
PLAID_PRODUCTION_SECRET=your_production_secret_here

# Webhook Configuration - Production (MUST use HTTPS)
PLAID_PRODUCTION_WEBHOOK_URL=https://your-production-domain.com/api/plaid/webhook
PLAID_PRODUCTION_WEBHOOK_SECRET=your_production_webhook_secret_here

# Redirect URI - Production (MUST use HTTPS)
PLAID_PRODUCTION_REDIRECT_URI=https://your-production-domain.com/plaid/callback

# Security - Production (REQUIRED for production)
PLAID_PRODUCTION_ENCRYPTION_KEY=your_production_encryption_key_here

# =============================================================================
# PL AID SANDBOX CONFIGURATION (for reference)
# =============================================================================
# These should be set to empty or commented out in production
# PLAID_SANDBOX_CLIENT_ID=
# PLAID_SANDBOX_SECRET=
# PLAID_SANDBOX_WEBHOOK_URL=
# PLAID_SANDBOX_WEBHOOK_SECRET=
# PLAID_SANDBOX_REDIRECT_URI=
# PLAID_SANDBOX_ENCRYPTION_KEY=

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================

# Flask Configuration
FLASK_ENV=production
FLASK_DEBUG=False
SECRET_KEY=your_production_secret_key_here_make_it_long_and_random

# Database Configuration
DATABASE_URL=postgresql://username:password@production-db-host:5432/mingus_prod

# Logging Configuration
LOG_LEVEL=INFO
PLAID_LOG_LEVEL=INFO

# Performance Configuration
PLAID_REQUEST_TIMEOUT=30
PLAID_MAX_RETRIES=3
PLAID_RETRY_DELAY=1.0

# =============================================================================
# PRODUCTION SECURITY SETTINGS
# =============================================================================

# HTTPS Enforcement
HTTPS_ENFORCED=True
HSTS_ENABLED=True
HSTS_MAX_AGE=31536000

# Session Security
SESSION_COOKIE_SECURE=True
SESSION_COOKIE_HTTPONLY=True
SESSION_COOKIE_SAMESITE=Strict
SESSION_COOKIE_MAX_AGE=3600

# CORS Configuration - Production
CORS_ORIGINS=https://your-production-domain.com,https://www.your-production-domain.com

# Rate Limiting
RATE_LIMIT_ENABLED=True
RATE_LIMIT_REQUESTS_PER_MINUTE=100
RATE_LIMIT_REQUESTS_PER_HOUR=1000

# =============================================================================
# MONITORING AND OBSERVABILITY
# =============================================================================

# Application Monitoring
ENABLE_APM=True
APM_SERVICE_NAME=mingus-plaid
APM_SERVICE_VERSION=1.0.0

# Metrics and Analytics
PLAID_ENABLE_METRICS=True
PLAID_METRICS_ENDPOINT=https://your-metrics-endpoint.com

# Error Tracking
SENTRY_DSN=your_sentry_dsn_here
SENTRY_ENVIRONMENT=production

# Health Checks
HEALTH_CHECK_ENABLED=True
HEALTH_CHECK_ENDPOINT=/health

# =============================================================================
# DATABASE AND CACHING
# =============================================================================

# Database Connection Pool
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=30
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# Redis Configuration (for caching and sessions)
REDIS_URL=redis://your-redis-host:6379/0
REDIS_PASSWORD=your_redis_password_here

# Cache Configuration
CACHE_TYPE=redis
CACHE_REDIS_URL=redis://your-redis-host:6379/1
CACHE_DEFAULT_TIMEOUT=300

# =============================================================================
# NOTIFICATION AND ALERTING
# =============================================================================

# Email Configuration
SMTP_HOST=smtp.your-email-provider.com
SMTP_PORT=587
SMTP_USERNAME=your_email@your-domain.com
SMTP_PASSWORD=your_email_password_here
SMTP_USE_TLS=True

# Webhook Notifications
PLAID_WEBHOOK_NOTIFICATIONS_ENABLED=True
PLAID_WEBHOOK_NOTIFICATION_EMAIL=admin@your-production-domain.com

# Slack Notifications (optional)
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/your/slack/webhook
SLACK_CHANNEL=#plaid-alerts

# PagerDuty Integration (optional)
PAGERDUTY_API_KEY=your_pagerduty_api_key_here
PAGERDUTY_SERVICE_ID=your_pagerduty_service_id_here

# =============================================================================
# BACKUP AND DISASTER RECOVERY
# =============================================================================

# Database Backup
DB_BACKUP_ENABLED=True
DB_BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
DB_BACKUP_RETENTION_DAYS=30

# File Storage
STORAGE_BACKEND=s3
AWS_ACCESS_KEY_ID=your_aws_access_key_here
AWS_SECRET_ACCESS_KEY=your_aws_secret_key_here
AWS_REGION=us-east-1
AWS_S3_BUCKET=your-mingus-backup-bucket

# =============================================================================
# PERFORMANCE AND SCALING
# =============================================================================

# Worker Configuration
CELERY_BROKER_URL=redis://your-redis-host:6379/2
CELERY_RESULT_BACKEND=redis://your-redis-host:6379/3
CELERY_WORKER_CONCURRENCY=4

# Load Balancer
LOAD_BALANCER_ENABLED=True
LOAD_BALANCER_HEALTH_CHECK_PATH=/health

# CDN Configuration
CDN_ENABLED=True
CDN_DOMAIN=cdn.your-production-domain.com

# =============================================================================
# COMPLIANCE AND AUDITING
# =============================================================================

# Audit Logging
AUDIT_LOGGING_ENABLED=True
AUDIT_LOG_LEVEL=INFO
AUDIT_LOG_RETENTION_DAYS=90

# Data Retention
DATA_RETENTION_DAYS=2555  # 7 years for financial data
ANONYMIZATION_ENABLED=True

# GDPR Compliance
GDPR_COMPLIANCE_ENABLED=True
DATA_EXPORT_ENABLED=True
DATA_DELETION_ENABLED=True

# =============================================================================
# DEPLOYMENT AND CI/CD
# =============================================================================

# Deployment Configuration
DEPLOYMENT_ENVIRONMENT=production
DEPLOYMENT_VERSION=1.0.0
DEPLOYMENT_TIMESTAMP=2025-01-27T00:00:00Z

# Blue-Green Deployment
BLUE_GREEN_DEPLOYMENT_ENABLED=True
BLUE_GREEN_HEALTH_CHECK_TIMEOUT=300

# Rollback Configuration
ROLLBACK_ENABLED=True
ROLLBACK_THRESHOLD_ERROR_RATE=0.05  # 5% error rate threshold

# =============================================================================
# SECURITY COMPLIANCE
# =============================================================================

# PCI DSS Compliance (if handling payment data)
PCI_COMPLIANCE_ENABLED=True
PCI_DATA_ENCRYPTION_ENABLED=True

# SOC 2 Compliance
SOC2_COMPLIANCE_ENABLED=True
SOC2_AUDIT_LOGGING_ENABLED=True

# =============================================================================
# CRITICAL PRODUCTION NOTES
# =============================================================================

# IMPORTANT: Before deploying to production:
# 1. Ensure all secrets are properly encrypted and stored securely
# 2. Set up proper SSL certificates for all domains
# 3. Configure firewall rules and security groups
# 4. Set up monitoring and alerting systems
# 5. Test webhook delivery and processing
# 6. Verify database backups and recovery procedures
# 7. Set up proper logging and log retention
# 8. Configure rate limiting and DDoS protection
# 9. Test disaster recovery procedures
# 10. Ensure compliance with financial regulations

# Webhook Security Checklist:
# ✓ HTTPS enforced for all webhook URLs
# ✓ Webhook signature verification enabled
# ✓ Rate limiting on webhook endpoints
# ✓ Proper error handling and logging
# ✓ Monitoring for webhook failures
# ✓ Retry logic for failed webhook processing
# ✓ Audit logging for all webhook events

# Database Security Checklist:
# ✓ Access tokens encrypted at rest
# ✓ Database connections use SSL/TLS
# ✓ Proper database user permissions
# ✓ Regular security updates
# ✓ Backup encryption
# ✓ Access logging enabled

# Application Security Checklist:
# ✓ HTTPS enforced for all connections
# ✓ Secure session management
# ✓ Input validation and sanitization
# ✓ SQL injection prevention
# ✓ XSS protection
# ✓ CSRF protection
# ✓ Rate limiting
# ✓ Security headers configured 