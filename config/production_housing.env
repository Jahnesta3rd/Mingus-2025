# MINGUS Optimal Living Location - Production Environment Configuration
# Copy this file to .env.production and update with your production values

# =============================================================================
# EXTERNAL API CONFIGURATION
# =============================================================================

# Rentals.com API
RENTALS_API_KEY=your_rentals_api_key_here
RENTALS_BASE_URL=https://api.rentals.com/v1
RENTALS_TIMEOUT=30
RENTALS_RETRY_ATTEMPTS=3
RENTALS_RATE_LIMIT=60
RENTALS_HOURLY_LIMIT=1000

# Zillow API (via RapidAPI)
ZILLOW_RAPIDAPI_KEY=your_zillow_rapidapi_key_here
ZILLOW_BASE_URL=https://zillow-com1.p.rapidapi.com
ZILLOW_TIMEOUT=30
ZILLOW_RETRY_ATTEMPTS=3
ZILLOW_RATE_LIMIT=30
ZILLOW_HOURLY_LIMIT=500

# Google Maps API
GOOGLE_MAPS_API_KEY=your_google_maps_api_key_here
GOOGLE_MAPS_BASE_URL=https://maps.googleapis.com/maps/api
GOOGLE_MAPS_TIMEOUT=15
GOOGLE_MAPS_RETRY_ATTEMPTS=2
GOOGLE_MAPS_RATE_LIMIT=100
GOOGLE_MAPS_HOURLY_LIMIT=2000

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# Primary Database
DATABASE_URL=postgresql://mingus_user:your_password@localhost:5432/mingus_production
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=30
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600
DB_ECHO=false

# Database Backup
DB_BACKUP_RETENTION_DAYS=30
DB_ROLLBACK_TIMEOUT=30

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================

# Redis Cache
REDIS_URL=redis://localhost:6379/0
REDIS_PASSWORD=your_redis_password
REDIS_MAX_CONNECTIONS=50
REDIS_SOCKET_TIMEOUT=5
REDIS_CONNECT_TIMEOUT=5

# Route Cache Configuration
ROUTE_CACHE_REFRESH_DAYS=7
ROUTE_CACHE_MAX_SIZE=10000
ROUTE_CACHE_CLEANUP_INTERVAL=3600

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# Application Security
SECRET_KEY=your_super_secret_key_here
HOUSING_ENCRYPTION_KEY=your_housing_encryption_key_here

# SSL Configuration
VERIFY_SSL=true
SSL_CERT_PATH=/path/to/ssl/cert.pem
SSL_KEY_PATH=/path/to/ssl/key.pem
CA_BUNDLE_PATH=/path/to/ssl/ca-bundle.pem

# API Key Rotation
RENTALS_KEY_ROTATION_DAYS=90
ZILLOW_KEY_ROTATION_DAYS=90
GOOGLE_MAPS_KEY_ROTATION_DAYS=90
RENTALS_BACKUP_KEYS=backup_key_1,backup_key_2
ZILLOW_BACKUP_KEYS=backup_key_1,backup_key_2
GOOGLE_MAPS_BACKUP_KEYS=backup_key_1,backup_key_2

# =============================================================================
# RATE LIMITING CONFIGURATION
# =============================================================================

# External API Rate Limits
EXTERNAL_API_RATE_LIMIT=100
EXTERNAL_API_HOURLY_LIMIT=1000
EXTERNAL_API_BURST_LIMIT=20

# Housing Feature Rate Limits
HOUSING_SEARCH_RATE_LIMIT=30
HOUSING_SEARCH_HOURLY_LIMIT=500
SCENARIO_RATE_LIMIT=20
SCENARIO_HOURLY_LIMIT=200

# User Rate Limits
USER_API_RATE_LIMIT=60
USER_API_HOURLY_LIMIT=1000
USER_API_BURST_LIMIT=10

# =============================================================================
# FEATURE FLAG CONFIGURATION
# =============================================================================

# Rollout Configuration
HOUSING_ROLLOUT_STRATEGY=percentage
HOUSING_ROLLOUT_PERCENTAGE=100

# Tier-based Limits
BUDGET_TIER_SEARCH_LIMIT=5
MID_TIER_SEARCH_LIMIT=-1
PROFESSIONAL_TIER_SEARCH_LIMIT=-1
BUDGET_TIER_SCENARIO_LIMIT=3
MID_TIER_SCENARIO_LIMIT=10
PROFESSIONAL_TIER_SCENARIO_LIMIT=-1

# =============================================================================
# MONITORING CONFIGURATION
# =============================================================================

# Sentry Error Tracking
SENTRY_DSN=your_sentry_dsn_here

# Rollback Notifications
ROLLBACK_NOTIFICATION_WEBHOOK=your_webhook_url_here
ESCALATION_CONTACTS=admin@mingus.com,devops@mingus.com

# Health Check Configuration
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=10
AUTO_ROLLBACK_THRESHOLD=5

# =============================================================================
# DATA RETENTION CONFIGURATION
# =============================================================================

# Data Retention Periods (in days)
HOUSING_SEARCHES_RETENTION_DAYS=365
HOUSING_SCENARIOS_RETENTION_DAYS=1095
ROUTE_CACHE_RETENTION_DAYS=30
PREFERENCES_RETENTION_DAYS=1095

# Backup Configuration
HOUSING_BACKUP_ENABLED=true
HOUSING_BACKUP_FREQUENCY=daily
HOUSING_BACKUP_RETENTION_DAYS=30
HOUSING_BACKUP_S3_BUCKET=mingus-housing-backups
HOUSING_BACKUP_ENCRYPTION_KEY=your_backup_encryption_key

# =============================================================================
# A/B TESTING CONFIGURATION
# =============================================================================

# A/B Test Settings
AB_TEST_DURATION_DAYS=14
AB_TEST_MIN_SAMPLE_SIZE=1000
AB_TEST_SIGNIFICANCE_LEVEL=0.95

# UI Variations
SEARCH_INTERFACE_VARIANT=control
SCENARIO_DISPLAY_VARIANT=control
RECOMMENDATION_ALGORITHM_VARIANT=control

# =============================================================================
# EXTERNAL SERVICE CONFIGURATION
# =============================================================================

# Rentals.com Specific
RENTALS_PROPERTY_TYPES=apartment,house,condo,townhouse,studio,loft
RENTALS_SEARCH_FILTERS=pet_friendly,furnished,parking,laundry,air_conditioning,dishwasher,pool,gym

# Zillow Specific
ZILLOW_HOME_TYPES=house,condo,townhouse,apartment,mobile,land,other
ZILLOW_SEARCH_FILTERS=minPrice,maxPrice,bedrooms,bathrooms,homeType,minSqft,maxSqft

# Google Maps Specific
GOOGLE_MAPS_TRAVEL_MODES=driving,walking,bicycling,transit
GOOGLE_MAPS_AVOID_OPTIONS=tolls,highways,ferries,indoor
GOOGLE_MAPS_UNITS=metric,imperial

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================

# Log Levels
LOG_LEVEL=INFO
HOUSING_LOG_LEVEL=DEBUG
API_LOG_LEVEL=INFO
ERROR_LOG_LEVEL=ERROR

# Log Files
HOUSING_LOG_FILE=logs/housing.log
API_LOG_FILE=logs/api.log
ERROR_LOG_FILE=logs/error.log
AUDIT_LOG_FILE=logs/audit.log

# =============================================================================
# PERFORMANCE CONFIGURATION
# =============================================================================

# Search Performance
MAX_SEARCH_RESULTS=50
SEARCH_TIMEOUT_SECONDS=30
CACHE_TTL_SECONDS=3600

# API Performance
API_TIMEOUT_SECONDS=30
API_RETRY_DELAY_SECONDS=1
API_MAX_RETRIES=3

# Database Performance
DB_QUERY_TIMEOUT=30
DB_CONNECTION_TIMEOUT=10
DB_STATEMENT_TIMEOUT=60

# =============================================================================
# DEVELOPMENT/STAGING OVERRIDES
# =============================================================================

# Uncomment for development/staging environments
# FLASK_ENV=development
# DEBUG=true
# TESTING=true

# Mock External APIs (for testing)
# MOCK_EXTERNAL_APIS=true
# MOCK_RENTALS_API=true
# MOCK_ZILLOW_API=true
# MOCK_GOOGLE_MAPS_API=true

# =============================================================================
# DEPLOYMENT CONFIGURATION
# =============================================================================

# Deployment Environment
DEPLOYMENT_ENV=production
DEPLOYMENT_REGION=us-east-1
DEPLOYMENT_VERSION=1.0.0

# Container Configuration
CONTAINER_MEMORY_LIMIT=2g
CONTAINER_CPU_LIMIT=1000m
CONTAINER_RESTART_POLICY=unless-stopped

# Health Check Configuration
HEALTH_CHECK_PATH=/health
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=10s
HEALTH_CHECK_RETRIES=3
HEALTH_CHECK_START_PERIOD=40s

# =============================================================================
# NOTIFICATION CONFIGURATION
# =============================================================================

# Email Notifications
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your_email@gmail.com
SMTP_PASSWORD=your_app_password
NOTIFICATION_EMAIL=admin@mingus.com

# Slack Notifications
SLACK_WEBHOOK_URL=your_slack_webhook_url
SLACK_CHANNEL=#mingus-alerts

# PagerDuty Notifications
PAGERDUTY_INTEGRATION_KEY=your_pagerduty_key
PAGERDUTY_SERVICE_KEY=your_service_key

# =============================================================================
# COMPLIANCE CONFIGURATION
# =============================================================================

# GDPR Compliance
GDPR_ENABLED=true
GDPR_DATA_EXPORT_ENABLED=true
GDPR_DATA_DELETION_ENABLED=true
GDPR_CONSENT_REQUIRED=true

# Privacy Settings
ANONYMIZE_USER_DATA=true
ENCRYPT_PII=true
AUDIT_LOG_ENABLED=true

# Data Processing
DATA_PROCESSING_CONSENT_REQUIRED=true
DATA_SHARING_CONSENT_REQUIRED=true
MARKETING_CONSENT_REQUIRED=true
