# ============================================================================
# MINGUS Email Verification System - Development Environment
# ============================================================================
# 
# This template contains all required environment variables for the email
# verification system in development mode.
# 
# SECURITY NOTE: This template uses development-appropriate defaults.
# NEVER use these values in production!
# 
# Copy this file to .env.development and customize as needed.
# ============================================================================

# ============================================================================
# FLASK ENVIRONMENT CONFIGURATION
# ============================================================================
FLASK_ENV=development
FLASK_DEBUG=true
FLASK_SECRET_KEY=dev-secret-key-change-in-production

# ============================================================================
# EMAIL VERIFICATION TOKEN SECURITY
# ============================================================================
# 
# CRITICAL: These settings control the security of verification tokens
# 
# EMAIL_VERIFICATION_SECRET: Cryptographically secure secret for HMAC token generation
# - Must be at least 32 characters long
# - Should be unique for each environment
# - Generated automatically in development if not provided
EMAIL_VERIFICATION_SECRET=

# EMAIL_VERIFICATION_TOKEN_LENGTH: Length of verification tokens in bytes
# - Development: 32 bytes (256 bits) - adequate for testing
# - Production: 64 bytes (512 bits) - cryptographically secure
EMAIL_VERIFICATION_TOKEN_LENGTH=32

# EMAIL_VERIFICATION_EXPIRY_HOURS: How long tokens remain valid
# - Development: 24 hours (allows overnight testing)
EMAIL_VERIFICATION_EXPIRY_HOURS=24

# EMAIL_VERIFICATION_MAX_TOKEN_AGE_HOURS: Maximum age before requiring regeneration
EMAIL_VERIFICATION_MAX_TOKEN_AGE_HOURS=48

# ============================================================================
# RATE LIMITING CONFIGURATION
# ============================================================================
# 
# These settings control how many verification attempts are allowed
# Development uses relaxed limits for testing convenience
# 
# Maximum verification attempts per hour per IP address
EMAIL_VERIFICATION_MAX_ATTEMPTS_PER_HOUR=50

# Maximum verification attempts per hour per user
EMAIL_VERIFICATION_MAX_ATTEMPTS_PER_USER_HOUR=20

# Maximum resend attempts per day per user
EMAIL_VERIFICATION_MAX_RESEND_ATTEMPTS_PER_DAY=10

# Cooldown period between resend attempts (0 = no cooldown in development)
EMAIL_VERIFICATION_RESEND_COOLDOWN_HOURS=0

# Maximum failed verification attempts before account lockout (0 = no lockout in development)
EMAIL_VERIFICATION_MAX_FAILED_ATTEMPTS=10

# Account lockout duration after max failed attempts (0 = no lockout in development)
EMAIL_VERIFICATION_LOCKOUT_DURATION_HOURS=0

# ============================================================================
# EMAIL CONFIGURATION
# ============================================================================
# 
# Email service integration settings
# 
# Email service provider (inherits from existing Resend setup)
EMAIL_SERVICE_PROVIDER=resend

# Email template directory path
EMAIL_TEMPLATE_DIR=backend/templates

# Default sender email address (development: localhost)
EMAIL_DEFAULT_FROM=dev@localhost

# Reply-to email address for support
EMAIL_REPLY_TO=dev@localhost

# Email subject line prefix (development: includes [DEV] tag)
EMAIL_SUBJECT_PREFIX=[DEV] Mingus - 

# Maximum email size in bytes (for template validation)
EMAIL_MAX_SIZE_BYTES=1048576

# ============================================================================
# REMINDER SYSTEM CONFIGURATION
# ============================================================================
# 
# Automatic reminder system for unverified users
# Development uses fast schedule for testing
# 
# Enable automatic reminder system
EMAIL_VERIFICATION_ENABLE_REMINDERS=true

# Reminder schedule in days after signup (comma-separated)
# Development: Very fast for testing (0,1,2 days)
EMAIL_VERIFICATION_REMINDER_SCHEDULE_DAYS=0,1,2

# Maximum reminders per user
EMAIL_VERIFICATION_MAX_REMINDERS_PER_USER=5

# ============================================================================
# AUDIT AND MONITORING CONFIGURATION
# ============================================================================
# 
# Logging and monitoring settings
# Development uses basic logging to avoid noise
# 
# Enable comprehensive audit logging
EMAIL_VERIFICATION_ENABLE_AUDIT_LOGGING=true

# Audit log retention period in days
EMAIL_VERIFICATION_AUDIT_LOG_RETENTION_DAYS=7

# Enable performance monitoring
EMAIL_VERIFICATION_ENABLE_MONITORING=false

# Metrics collection interval in minutes
EMAIL_VERIFICATION_METRICS_INTERVAL_MINUTES=60

# ============================================================================
# INTEGRATION CONFIGURATION
# ============================================================================
# 
# URLs and connection strings for various services
# 
# Frontend URL for verification links
FRONTEND_URL=http://localhost:3000

# API base URL for verification endpoints
API_BASE_URL=http://localhost:5000

# Redis configuration for rate limiting
REDIS_URL=redis://localhost:6379/0

# Database connection string (inherits from existing config)
DATABASE_URL=postgresql://localhost:5432/mingus_dev

# Celery broker URL for background tasks
CELERY_BROKER_URL=redis://localhost:6379/1

# ============================================================================
# SECURITY CONFIGURATION
# ============================================================================
# 
# Security tracking and session management
# Development uses minimal tracking for testing convenience
# 
# Enable IP address tracking for security
EMAIL_VERIFICATION_TRACK_IP_ADDRESSES=false

# Enable User-Agent tracking for security
EMAIL_VERIFICATION_TRACK_USER_AGENTS=false

# Enable geolocation tracking (if available)
EMAIL_VERIFICATION_TRACK_GEO_LOCATION=false

# Maximum concurrent verification sessions per user
EMAIL_VERIFICATION_MAX_CONCURRENT_SESSIONS=10

# Session timeout in hours
EMAIL_VERIFICATION_SESSION_TIMEOUT_HOURS=48

# ============================================================================
# DEVELOPMENT AND TESTING CONFIGURATION
# ============================================================================
# 
# Development-specific settings for testing and debugging
# 
# Enable debug mode (development only)
EMAIL_VERIFICATION_DEBUG=true

# Enable test mode for automated testing
EMAIL_VERIFICATION_TEST_MODE=true

# Test email override (development only)
# If set, all verification emails will be sent to this address
EMAIL_VERIFICATION_TEST_EMAIL=

# Mock email service for testing
# If true, emails are logged instead of sent
EMAIL_VERIFICATION_MOCK_EMAIL_SERVICE=true

# ============================================================================
# EXISTING SERVICE INTEGRATION
# ============================================================================
# 
# These variables should already be set in your existing configuration
# They're included here for reference and validation
# 
# Resend API key (from existing email service configuration)
RESEND_API_KEY=your_resend_api_key_here

# Existing database configuration
POSTGRES_DB=mingus_dev
POSTGRES_USER=mingus_user
POSTGRES_PASSWORD=mingus_password
POSTGRES_HOST=localhost
POSTGRES_PORT=5432

# Existing Redis configuration
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0

# ============================================================================
# DEVELOPMENT OVERRIDES
# ============================================================================
# 
# Additional development-specific overrides
# 
# Enable SQL query logging
SQLALCHEMY_ECHO=true

# Enable Celery task logging
CELERY_TASK_ALWAYS_EAGER=true

# Disable SSL verification for local development
REQUESTS_VERIFY_SSL=false

# ============================================================================
# NOTES FOR DEVELOPERS
# ============================================================================
# 
# 1. Copy this file to .env.development
# 2. Customize values as needed for your local setup
# 3. Never commit .env.development to version control
# 4. Use .env.development.local for machine-specific overrides
# 5. Test email verification flow with mock service enabled
# 6. Monitor logs for any configuration validation errors
# 
# ============================================================================
