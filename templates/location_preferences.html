<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Location Preferences - Mingus</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../static/css/mingus-referral-system.css">
    <style>
        /* Location preferences specific styles */
        .location-container {
            background: linear-gradient(135deg, #1f2937, #374151);
            border: 1px solid rgba(139, 92, 246, 0.2);
            border-radius: 20px;
            padding: 32px;
            margin: 32px 0;
        }
        
        .location-header {
            text-align: center;
            margin-bottom: 32px;
        }
        
        .location-icon {
            font-size: 64px;
            margin-bottom: 16px;
            color: #8b5cf6;
        }
        
        .preference-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 24px;
            margin: 24px 0;
        }
        
        .preference-card {
            background: #374151;
            border: 1px solid #4b5563;
            border-radius: 16px;
            padding: 24px;
            transition: all 0.3s ease;
        }
        
        .preference-card:hover {
            border-color: #8b5cf6;
            transform: translateY(-2px);
        }
        
        .preference-card.active {
            border-color: #8b5cf6;
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(168, 85, 247, 0.1));
        }
        
        .preference-title {
            font-size: 18px;
            font-weight: 600;
            color: white;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .preference-description {
            color: #9ca3af;
            font-size: 14px;
            margin-bottom: 16px;
        }
        
        .input-group {
            display: flex;
            flex-direction: column;
            margin-bottom: 16px;
        }
        
        .input-label {
            color: #d1d5db;
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 14px;
        }
        
        .input-field {
            background: #1f2937;
            border: 1px solid #4b5563;
            border-radius: 8px;
            padding: 12px 16px;
            color: white;
            font-size: 16px;
            transition: all 0.3s ease;
        }
        
        .input-field:focus {
            outline: none;
            border-color: #8b5cf6;
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1);
        }
        
        .input-field:disabled {
            background: #374151;
            color: #6b7280;
            cursor: not-allowed;
        }
        
        .select-field {
            background: #1f2937;
            border: 1px solid #4b5563;
            border-radius: 8px;
            padding: 12px 16px;
            color: white;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .select-field:focus {
            outline: none;
            border-color: #8b5cf6;
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1);
        }
        
        .radius-selector {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            margin: 16px 0;
        }
        
        .radius-option {
            background: #1f2937;
            border: 1px solid #4b5563;
            border-radius: 8px;
            padding: 8px 16px;
            color: #d1d5db;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
        }
        
        .radius-option:hover {
            border-color: #8b5cf6;
            background: #374151;
        }
        
        .radius-option.selected {
            background: #8b5cf6;
            border-color: #8b5cf6;
            color: white;
        }
        
        .map-container {
            background: #1f2937;
            border: 1px solid #374151;
            border-radius: 12px;
            height: 300px;
            margin: 24px 0;
            position: relative;
            overflow: hidden;
        }
        
        .map-placeholder {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            color: #6b7280;
        }
        
        .map-controls {
            position: absolute;
            top: 16px;
            right: 16px;
            display: flex;
            gap: 8px;
        }
        
        .map-button {
            background: rgba(0, 0, 0, 0.7);
            border: 1px solid #4b5563;
            border-radius: 6px;
            padding: 8px 12px;
            color: white;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s ease;
        }
        
        .map-button:hover {
            background: rgba(0, 0, 0, 0.9);
            border-color: #8b5cf6;
        }
        
        .location-summary {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(168, 85, 247, 0.1));
            border: 1px solid rgba(139, 92, 246, 0.2);
            border-radius: 12px;
            padding: 20px;
            margin: 24px 0;
        }
        
        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
        }
        
        .summary-item {
            text-align: center;
        }
        
        .summary-label {
            color: #9ca3af;
            font-size: 14px;
            margin-bottom: 4px;
        }
        
        .summary-value {
            color: white;
            font-size: 18px;
            font-weight: 600;
        }
        
        .summary-value.highlight {
            color: #8b5cf6;
        }
        
        .commute-analysis {
            background: #374151;
            border: 1px solid #4b5563;
            border-radius: 12px;
            padding: 20px;
            margin: 24px 0;
        }
        
        .commute-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 12px;
            margin: 16px 0;
        }
        
        .commute-option {
            background: #1f2937;
            border: 1px solid #4b5563;
            border-radius: 8px;
            padding: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .commute-option:hover {
            border-color: #8b5cf6;
        }
        
        .commute-option.selected {
            border-color: #8b5cf6;
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(168, 85, 247, 0.1));
        }
        
        .commute-icon {
            font-size: 24px;
            margin-bottom: 8px;
            display: block;
        }
        
        .commute-label {
            color: #d1d5db;
            font-size: 14px;
            font-weight: 600;
        }
        
        .commute-time {
            color: #9ca3af;
            font-size: 12px;
            margin-top: 4px;
        }
        
        .cost-of-living {
            background: linear-gradient(135deg, #1f2937, #374151);
            border: 1px solid rgba(139, 92, 246, 0.2);
            border-radius: 16px;
            padding: 24px;
            margin: 24px 0;
        }
        
        .col-comparison {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .col-item {
            background: #374151;
            border: 1px solid #4b5563;
            border-radius: 8px;
            padding: 16px;
            text-align: center;
        }
        
        .col-city {
            color: white;
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        .col-index {
            color: #8b5cf6;
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 4px;
        }
        
        .col-description {
            color: #9ca3af;
            font-size: 12px;
        }
        
        .col-description.higher {
            color: #f59e0b;
        }
        
        .col-description.lower {
            color: #10b981;
        }
        
        .toggle-group {
            display: flex;
            align-items: center;
            gap: 12px;
            margin: 16px 0;
        }
        
        .toggle-switch {
            position: relative;
            width: 48px;
            height: 24px;
            background: #4b5563;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .toggle-switch.active {
            background: #8b5cf6;
        }
        
        .toggle-slider {
            position: absolute;
            top: 2px;
            left: 2px;
            width: 20px;
            height: 20px;
            background: white;
            border-radius: 50%;
            transition: all 0.3s ease;
        }
        
        .toggle-switch.active .toggle-slider {
            transform: translateX(24px);
        }
        
        .toggle-label {
            color: #d1d5db;
            font-weight: 600;
        }
        
        .preview-jobs {
            background: #374151;
            border: 1px solid #4b5563;
            border-radius: 12px;
            padding: 20px;
            margin: 24px 0;
        }
        
        .job-preview-item {
            background: #1f2937;
            border: 1px solid #4b5563;
            border-radius: 8px;
            padding: 16px;
            margin: 12px 0;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .job-icon {
            font-size: 24px;
            color: #8b5cf6;
        }
        
        .job-info {
            flex: 1;
        }
        
        .job-title {
            color: white;
            font-weight: 600;
            margin-bottom: 4px;
        }
        
        .job-company {
            color: #9ca3af;
            font-size: 14px;
            margin-bottom: 4px;
        }
        
        .job-location {
            color: #6b7280;
            font-size: 12px;
        }
        
        .job-distance {
            color: #8b5cf6;
            font-weight: 600;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <!-- Skip Links for Accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>
    <a href="#location-settings" class="skip-link">Skip to location settings</a>
    
    <!-- Header -->
    <header class="header" role="banner">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-icon">M</div>
                    <span class="logo-text">Mingus</span>
                </div>
                <nav class="nav" role="navigation" aria-label="Main navigation">
                    <a href="#" class="nav-link">Dashboard</a>
                    <a href="#" class="nav-link">Features</a>
                    <a href="#" class="nav-link">Pricing</a>
                </nav>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main id="main-content" role="main">
        <!-- Hero Section -->
        <section class="hero-section" aria-label="Location preferences hero">
            <div class="container">
                <div class="hero-content">
                    <div class="hero-text">
                        <div class="unlock-badge">Premium Features Unlocked</div>
                        <h1 class="hero-title">
                            Location
                            <span class="gradient-text">Preferences</span>
                        </h1>
                        <p class="hero-description">
                            Set your location preferences to get personalized job recommendations, 
                            commute analysis, and cost of living insights for your area.
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Location Settings -->
        <section id="location-settings" class="location-settings" aria-label="Location settings">
            <div class="container">
                <div class="location-container">
                    <div class="location-header">
                        <div class="location-icon">📍</div>
                        <h2 class="section-title">Set Your Location</h2>
                        <p class="section-description">
                            Configure your location preferences to get the most relevant job recommendations.
                        </p>
                    </div>
                    
                    <div class="preference-grid">
                        <!-- Primary Location -->
                        <div class="preference-card active">
                            <h3 class="preference-title">
                                <span>🏠</span>
                                Primary Location
                            </h3>
                            <p class="preference-description">
                                Your main location for job searches and commute calculations.
                            </p>
                            
                            <div class="input-group">
                                <label for="zipcode" class="input-label">ZIP Code</label>
                                <input type="text" id="zipcode" class="input-field" placeholder="Enter your ZIP code" maxlength="5">
                            </div>
                            
                            <div class="input-group">
                                <label for="address" class="input-label">Street Address (Optional)</label>
                                <input type="text" id="address" class="input-field" placeholder="Enter your street address">
                            </div>
                            
                            <div class="input-group">
                                <label for="city" class="input-label">City</label>
                                <input type="text" id="city" class="input-field" placeholder="City" readonly>
                            </div>
                            
                            <div class="input-group">
                                <label for="state" class="input-label">State</label>
                                <input type="text" id="state" class="input-field" placeholder="State" readonly>
                            </div>
                        </div>
                        
                        <!-- Search Radius -->
                        <div class="preference-card">
                            <h3 class="preference-title">
                                <span>🔍</span>
                                Search Radius
                            </h3>
                            <p class="preference-description">
                                How far are you willing to commute for work?
                            </p>
                            
                            <div class="radius-selector">
                                <div class="radius-option" data-radius="5">5 mi</div>
                                <div class="radius-option" data-radius="10">10 mi</div>
                                <div class="radius-option selected" data-radius="30">30 mi</div>
                                <div class="radius-option" data-radius="50">50 mi</div>
                                <div class="radius-option" data-radius="100">100 mi</div>
                                <div class="radius-option" data-radius="nationwide">Nationwide</div>
                            </div>
                            
                            <div class="input-group">
                                <label for="custom-radius" class="input-label">Custom Radius (miles)</label>
                                <input type="number" id="custom-radius" class="input-field" placeholder="Enter custom radius" min="1" max="500">
                            </div>
                        </div>
                        
                        <!-- Work Type Preferences -->
                        <div class="preference-card">
                            <h3 class="preference-title">
                                <span>💼</span>
                                Work Type
                            </h3>
                            <p class="preference-description">
                                What type of work arrangement do you prefer?
                            </p>
                            
                            <div class="input-group">
                                <label for="work-type" class="input-label">Preferred Work Type</label>
                                <select id="work-type" class="select-field">
                                    <option value="any">Any</option>
                                    <option value="remote">Remote Only</option>
                                    <option value="hybrid">Hybrid</option>
                                    <option value="onsite">On-site Only</option>
                                </select>
                            </div>
                            
                            <div class="toggle-group">
                                <div class="toggle-switch" id="remote-toggle">
                                    <div class="toggle-slider"></div>
                                </div>
                                <label class="toggle-label">Include remote opportunities</label>
                            </div>
                            
                            <div class="toggle-group">
                                <div class="toggle-switch active" id="hybrid-toggle">
                                    <div class="toggle-slider"></div>
                                </div>
                                <label class="toggle-label">Include hybrid opportunities</label>
                            </div>
                        </div>
                        
                        <!-- Commute Preferences -->
                        <div class="preference-card">
                            <h3 class="preference-title">
                                <span>🚗</span>
                                Commute Preferences
                            </h3>
                            <p class="preference-description">
                                How do you prefer to get to work?
                            </p>
                            
                            <div class="commute-options">
                                <div class="commute-option selected" data-transport="driving">
                                    <div class="commute-icon">🚗</div>
                                    <div class="commute-label">Driving</div>
                                    <div class="commute-time">25-45 min</div>
                                </div>
                                
                                <div class="commute-option" data-transport="transit">
                                    <div class="commute-icon">🚌</div>
                                    <div class="commute-label">Public Transit</div>
                                    <div class="commute-time">30-60 min</div>
                                </div>
                                
                                <div class="commute-option" data-transport="walking">
                                    <div class="commute-icon">🚶</div>
                                    <div class="commute-label">Walking</div>
                                    <div class="commute-time">5-15 min</div>
                                </div>
                                
                                <div class="commute-option" data-transport="cycling">
                                    <div class="commute-icon">🚴</div>
                                    <div class="commute-label">Cycling</div>
                                    <div class="commute-time">10-30 min</div>
                                </div>
                            </div>
                            
                            <div class="input-group">
                                <label for="max-commute" class="input-label">Maximum Commute Time (minutes)</label>
                                <input type="number" id="max-commute" class="input-field" placeholder="30" min="5" max="120">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Interactive Map -->
        <section class="map-section" aria-label="Interactive map">
            <div class="container">
                <h2 class="section-title">Location Map</h2>
                <p class="section-description">
                    See your search area and nearby job opportunities on the interactive map.
                </p>
                
                <div class="map-container">
                    <div class="map-placeholder" id="map-placeholder">
                        <div style="font-size: 48px; margin-bottom: 16px;">🗺️</div>
                        <div>Interactive Map</div>
                        <div style="font-size: 14px; margin-top: 8px;">Enter your ZIP code to see the map</div>
                    </div>
                    
                    <div class="map-controls">
                        <button class="map-button" onclick="toggleMapView('satellite')">Satellite</button>
                        <button class="map-button" onclick="toggleMapView('street')">Street</button>
                        <button class="map-button" onclick="toggleMapView('terrain')">Terrain</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Location Summary -->
        <section class="summary-section" aria-label="Location summary">
            <div class="container">
                <div class="location-summary">
                    <h3 class="summary-title">Location Summary</h3>
                    <div class="summary-grid">
                        <div class="summary-item">
                            <div class="summary-label">Metro Area</div>
                            <div class="summary-value" id="metro-area">Enter ZIP code</div>
                        </div>
                        <div class="summary-item">
                            <div class="summary-label">Search Radius</div>
                            <div class="summary-value highlight" id="search-radius">30 miles</div>
                        </div>
                        <div class="summary-item">
                            <div class="summary-label">Jobs Available</div>
                            <div class="summary-value highlight" id="jobs-available">0</div>
                        </div>
                        <div class="summary-item">
                            <div class="summary-label">Avg. Commute</div>
                            <div class="summary-value" id="avg-commute">0 min</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Cost of Living Analysis -->
        <section class="col-section" aria-label="Cost of living analysis">
            <div class="container">
                <h2 class="section-title">Cost of Living Analysis</h2>
                <p class="section-description">
                    Compare the cost of living in your area with other major cities.
                </p>
                
                <div class="cost-of-living">
                    <h3 class="col-title">Cost of Living Comparison</h3>
                    <div class="col-comparison">
                        <div class="col-item">
                            <div class="col-city" id="current-city">Your City</div>
                            <div class="col-index" id="current-index">100</div>
                            <div class="col-description">Baseline</div>
                        </div>
                        <div class="col-item">
                            <div class="col-city">New York, NY</div>
                            <div class="col-index">185</div>
                            <div class="col-description higher">+85% higher</div>
                        </div>
                        <div class="col-item">
                            <div class="col-city">San Francisco, CA</div>
                            <div class="col-index">172</div>
                            <div class="col-description higher">+72% higher</div>
                        </div>
                        <div class="col-item">
                            <div class="col-city">Atlanta, GA</div>
                            <div class="col-index">95</div>
                            <div class="col-description lower">-5% lower</div>
                        </div>
                        <div class="col-item">
                            <div class="col-city">Dallas, TX</div>
                            <div class="col-index">88</div>
                            <div class="col-description lower">-12% lower</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Job Preview -->
        <section class="preview-section" aria-label="Job preview">
            <div class="container">
                <h2 class="section-title">Job Opportunities Preview</h2>
                <p class="section-description">
                    Here are some job opportunities in your selected area.
                </p>
                
                <div class="preview-jobs">
                    <div class="job-preview-item">
                        <div class="job-icon">💼</div>
                        <div class="job-info">
                            <div class="job-title">Senior Software Engineer</div>
                            <div class="job-company">TechCorp Solutions</div>
                            <div class="job-location">📍 Downtown, 2.3 miles away</div>
                        </div>
                        <div class="job-distance">2.3 mi</div>
                    </div>
                    
                    <div class="job-preview-item">
                        <div class="job-icon">📊</div>
                        <div class="job-info">
                            <div class="job-title">Product Manager</div>
                            <div class="job-company">InnovateLab</div>
                            <div class="job-location">📍 Midtown, 5.7 miles away</div>
                        </div>
                        <div class="job-distance">5.7 mi</div>
                    </div>
                    
                    <div class="job-preview-item">
                        <div class="job-icon">🎨</div>
                        <div class="job-info">
                            <div class="job-title">UX Designer</div>
                            <div class="job-company">Creative Studio</div>
                            <div class="job-location">📍 Arts District, 8.1 miles away</div>
                        </div>
                        <div class="job-distance">8.1 mi</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Action Buttons -->
        <section class="action-section" aria-label="Action buttons">
            <div class="container">
                <div class="action-buttons">
                    <button class="btn btn-primary btn-large" onclick="savePreferences()">
                        <span>💾</span>
                        <span>Save Preferences</span>
                    </button>
                    <button class="btn btn-secondary" onclick="findJobs()">
                        <span>🔍</span>
                        <span>Find Jobs</span>
                    </button>
                    <button class="btn btn-secondary" onclick="resetPreferences()">
                        <span>🔄</span>
                        <span>Reset</span>
                    </button>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer" role="contentinfo">
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">
                    <div class="logo-icon">M</div>
                    <span class="logo-text">Mingus</span>
                </div>
                <p class="footer-text">Empowering Black professionals to build generational wealth</p>
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <script src="../static/js/mingus-referral-system.js"></script>
    <script>
        // Initialize location preferences page
        document.addEventListener('DOMContentLoaded', function() {
            const referralSystem = new MingusReferralSystem();
            referralSystem.initLocationPreferences();
            
            // Initialize form
            initializeForm();
            
            // Load saved preferences
            loadSavedPreferences();
        });
        
        function initializeForm() {
            const zipcodeInput = document.getElementById('zipcode');
            const radiusOptions = document.querySelectorAll('.radius-option');
            const commuteOptions = document.querySelectorAll('.commute-option');
            const toggles = document.querySelectorAll('.toggle-switch');
            
            // ZIP code validation and location lookup
            zipcodeInput.addEventListener('input', function() {
                const zipcode = this.value.replace(/\D/g, '');
                this.value = zipcode;
                
                if (zipcode.length === 5) {
                    lookupLocation(zipcode);
                }
            });
            
            // Radius selection
            radiusOptions.forEach(option => {
                option.addEventListener('click', function() {
                    radiusOptions.forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                    updateLocationSummary();
                });
            });
            
            // Commute options
            commuteOptions.forEach(option => {
                option.addEventListener('click', function() {
                    commuteOptions.forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                    updateLocationSummary();
                });
            });
            
            // Toggle switches
            toggles.forEach(toggle => {
                toggle.addEventListener('click', function() {
                    this.classList.toggle('active');
                    updateLocationSummary();
                });
            });
            
            // Custom radius input
            document.getElementById('custom-radius').addEventListener('input', function() {
                if (this.value) {
                    radiusOptions.forEach(opt => opt.classList.remove('selected'));
                    updateLocationSummary();
                }
            });
        }
        
        function lookupLocation(zipcode) {
            // Simulate location lookup
            const locations = {
                '10001': { city: 'New York', state: 'NY', metro: 'New York Metro', jobs: 47, commute: 25 },
                '90210': { city: 'Beverly Hills', state: 'CA', metro: 'Los Angeles Metro', jobs: 32, commute: 30 },
                '60601': { city: 'Chicago', state: 'IL', metro: 'Chicago Metro', jobs: 28, commute: 22 },
                '75201': { city: 'Dallas', state: 'TX', metro: 'Dallas-Fort Worth Metro', jobs: 35, commute: 20 },
                '30301': { city: 'Atlanta', state: 'GA', metro: 'Atlanta Metro', jobs: 41, commute: 18 }
            };
            
            const location = locations[zipcode];
            if (location) {
                document.getElementById('city').value = location.city;
                document.getElementById('state').value = location.state;
                document.getElementById('metro-area').textContent = location.metro;
                document.getElementById('jobs-available').textContent = location.jobs;
                document.getElementById('avg-commute').textContent = location.commute + ' min';
                document.getElementById('current-city').textContent = location.city;
                
                // Update map placeholder
                updateMapPlaceholder(location);
            } else {
                // Simulate API call for unknown ZIP codes
                setTimeout(() => {
                    document.getElementById('city').value = 'Unknown City';
                    document.getElementById('state').value = 'Unknown State';
                    document.getElementById('metro-area').textContent = 'Unknown Metro Area';
                    document.getElementById('jobs-available').textContent = '0';
                    document.getElementById('avg-commute').textContent = '0 min';
                }, 1000);
            }
        }
        
        function updateMapPlaceholder(location) {
            const placeholder = document.getElementById('map-placeholder');
            placeholder.innerHTML = `
                <div style="font-size: 48px; margin-bottom: 16px;">🗺️</div>
                <div>${location.city}, ${location.state}</div>
                <div style="font-size: 14px; margin-top: 8px;">${location.metro}</div>
                <div style="font-size: 12px; margin-top: 4px; color: #8b5cf6;">${location.jobs} jobs available</div>
            `;
        }
        
        function updateLocationSummary() {
            const selectedRadius = document.querySelector('.radius-option.selected');
            const customRadius = document.getElementById('custom-radius').value;
            const radius = customRadius || selectedRadius?.dataset.radius || '30';
            
            document.getElementById('search-radius').textContent = radius === 'nationwide' ? 'Nationwide' : radius + ' miles';
        }
        
        function toggleMapView(view) {
            console.log('Switching to', view, 'view');
            // In a real implementation, this would change the map view
        }
        
        function savePreferences() {
            const preferences = {
                zipcode: document.getElementById('zipcode').value,
                address: document.getElementById('address').value,
                city: document.getElementById('city').value,
                state: document.getElementById('state').value,
                radius: document.querySelector('.radius-option.selected')?.dataset.radius || '30',
                customRadius: document.getElementById('custom-radius').value,
                workType: document.getElementById('work-type').value,
                maxCommute: document.getElementById('max-commute').value,
                transport: document.querySelector('.commute-option.selected')?.dataset.transport || 'driving',
                remoteEnabled: document.getElementById('remote-toggle').classList.contains('active'),
                hybridEnabled: document.getElementById('hybrid-toggle').classList.contains('active')
            };
            
            localStorage.setItem('mingus_location_preferences', JSON.stringify(preferences));
            alert('Location preferences saved successfully!');
        }
        
        function loadSavedPreferences() {
            const saved = localStorage.getItem('mingus_location_preferences');
            if (saved) {
                const preferences = JSON.parse(saved);
                
                document.getElementById('zipcode').value = preferences.zipcode || '';
                document.getElementById('address').value = preferences.address || '';
                document.getElementById('city').value = preferences.city || '';
                document.getElementById('state').value = preferences.state || '';
                document.getElementById('work-type').value = preferences.workType || 'any';
                document.getElementById('max-commute').value = preferences.maxCommute || '30';
                
                if (preferences.radius) {
                    const radiusOption = document.querySelector(`[data-radius="${preferences.radius}"]`);
                    if (radiusOption) {
                        document.querySelectorAll('.radius-option').forEach(opt => opt.classList.remove('selected'));
                        radiusOption.classList.add('selected');
                    }
                }
                
                if (preferences.transport) {
                    const transportOption = document.querySelector(`[data-transport="${preferences.transport}"]`);
                    if (transportOption) {
                        document.querySelectorAll('.commute-option').forEach(opt => opt.classList.remove('selected'));
                        transportOption.classList.add('selected');
                    }
                }
                
                if (preferences.remoteEnabled) {
                    document.getElementById('remote-toggle').classList.add('active');
                }
                
                if (preferences.hybridEnabled) {
                    document.getElementById('hybrid-toggle').classList.add('active');
                }
                
                updateLocationSummary();
            }
        }
        
        function findJobs() {
            const zipcode = document.getElementById('zipcode').value;
            if (zipcode.length !== 5) {
                alert('Please enter a valid ZIP code first.');
                return;
            }
            
            // Redirect to job results page
            window.location.href = 'targeted_results.html';
        }
        
        function resetPreferences() {
            if (confirm('Are you sure you want to reset all location preferences?')) {
                document.getElementById('referral-form-element').reset();
                document.querySelectorAll('.radius-option').forEach(opt => opt.classList.remove('selected'));
                document.querySelector('.radius-option[data-radius="30"]').classList.add('selected');
                document.querySelectorAll('.commute-option').forEach(opt => opt.classList.remove('selected'));
                document.querySelector('.commute-option[data-transport="driving"]').classList.add('selected');
                document.querySelectorAll('.toggle-switch').forEach(toggle => toggle.classList.remove('active'));
                document.getElementById('hybrid-toggle').classList.add('active');
                
                updateLocationSummary();
            }
        }
    </script>
</body>
</html>
