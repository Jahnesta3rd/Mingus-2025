<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="touch_target_optimization.css">

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MINGUS Mobile Performance Test Suite</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #000;
            color: #fff;
            line-height: 1.6;
        }

        .test-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .test-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .test-header h1 {
            color: #00d4aa;
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .test-header p {
            color: #ccc;
            font-size: 1.1rem;
        }

        .test-section {
            background: #111;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid #333;
        }

        .test-section h2 {
            color: #00d4aa;
            margin-bottom: 15px;
            font-size: 1.5rem;
        }

        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .test-card {
            background: #1a1a1a;
            border-radius: 8px;
            padding: 15px;
            border: 1px solid #333;
        }

        .test-card h3 {
            color: #667eea;
            margin-bottom: 10px;
        }

        .test-button {
            background: linear-gradient(135deg, #00d4aa, #667eea);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            margin: 5px;
            transition: all 0.3s ease;
        }

        .test-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 212, 170, 0.3);
        }

        .test-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .results-panel {
            background: #1a1a1a;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            border: 1px solid #333;
        }

        .metric {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #333;
        }

        .metric:last-child {
            border-bottom: none;
        }

        .metric-label {
            font-weight: 500;
        }

        .metric-value {
            font-family: 'Courier New', monospace;
            color: #00d4aa;
        }

        .metric-status {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 500;
        }

        .status-good {
            background: #27ae60;
            color: white;
        }

        .status-warning {
            background: #f39c12;
            color: white;
        }

        .status-poor {
            background: #e74c3c;
            color: white;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #333;
            border-radius: 4px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #00d4aa, #667eea);
            transition: width 0.3s ease;
        }

        .network-simulator {
            background: #1a1a1a;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .network-selector {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 15px;
        }

        .network-option {
            background: #333;
            border: 2px solid transparent;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .network-option.active {
            border-color: #00d4aa;
            background: #00d4aa;
            color: white;
        }

        .device-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-bottom: 15px;
        }

        .device-option {
            background: #333;
            border: 2px solid transparent;
            padding: 12px;
            border-radius: 6px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s ease;
        }

        .device-option.active {
            border-color: #667eea;
            background: #667eea;
            color: white;
        }

        .real-time-metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .metric-card {
            background: #1a1a1a;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            border: 1px solid #333;
        }

        .metric-value-large {
            font-size: 1.5rem;
            font-weight: bold;
            color: #00d4aa;
            margin-bottom: 5px;
        }

        .metric-label-small {
            font-size: 0.9rem;
            color: #ccc;
        }

        .test-status {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #1a1a1a;
            border-radius: 8px;
            padding: 15px;
            border: 1px solid #333;
            z-index: 1000;
            min-width: 200px;
        }

        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .status-running {
            background: #f39c12;
            animation: pulse 1s infinite;
        }

        .status-complete {
            background: #27ae60;
        }

        .status-error {
            background: #e74c3c;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        @media (max-width: 768px) {
            .test-container {
                padding: 10px;
            }
            
            .test-grid {
                grid-template-columns: 1fr;
            }
            
            .network-selector {
                flex-direction: column;
            }
            
            .device-selector {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="test-container">
        <div class="test-header">
            <h1>üì± MINGUS Mobile Performance Test Suite</h1>
            <p>Comprehensive testing for African American professionals across varying network speeds</p>
        </div>

        <!-- Network Simulator -->
        <div class="test-section">
            <h2>üåê Network Simulation</h2>
            <div class="network-simulator">
                <div class="network-selector">
                    <div class="network-option active" data-network="4g-fast">4G Fast (10 Mbps)</div>
                    <div class="network-option" data-network="4g-slow">4G Slow (2.5 Mbps)</div>
                    <div class="network-option" data-network="3g-fast">3G Fast (1.5 Mbps)</div>
                    <div class="network-option" data-network="3g-slow">3G Slow (0.75 Mbps)</div>
                    <div class="network-option" data-network="2g">2G (0.25 Mbps)</div>
                </div>
                <button class="test-button" onclick="simulateNetwork()">Apply Network Settings</button>
            </div>
        </div>

        <!-- Device Testing -->
        <div class="test-section">
            <h2>üì± Device Testing</h2>
            <div class="device-selector">
                <div class="device-option active" data-device="iphone-14">iPhone 14 (High-end)</div>
                <div class="device-option" data-device="iphone-8">iPhone 8 (Mid-range)</div>
                <div class="device-option" data-device="samsung-s21">Samsung S21 (High-end)</div>
                <div class="device-option" data-device="samsung-a12">Samsung A12 (Budget)</div>
                <div class="device-option" data-device="pixel-4a">Pixel 4a (Mid-range)</div>
            </div>
            <button class="test-button" onclick="simulateDevice()">Apply Device Settings</button>
        </div>

        <!-- Real-time Metrics -->
        <div class="test-section">
            <h2>üìä Real-time Performance Metrics</h2>
            <div class="real-time-metrics">
                <div class="metric-card">
                    <div class="metric-value-large" id="lcp-value">--</div>
                    <div class="metric-label-small">LCP (ms)</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value-large" id="fid-value">--</div>
                    <div class="metric-label-small">FID (ms)</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value-large" id="cls-value">--</div>
                    <div class="metric-label-small">CLS</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value-large" id="fps-value">--</div>
                    <div class="metric-label-small">FPS</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value-large" id="memory-value">--</div>
                    <div class="metric-label-small">Memory (MB)</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value-large" id="network-value">--</div>
                    <div class="metric-label-small">Network</div>
                </div>
            </div>
        </div>

        <!-- Performance Tests -->
        <div class="test-section">
            <h2>üß™ Performance Tests</h2>
            <div class="test-grid">
                <div class="test-card">
                    <h3>Core Web Vitals</h3>
                    <p>Test LCP, FID, and CLS performance</p>
                    <button class="test-button" onclick="runWebVitalsTest()">Run Test</button>
                </div>
                
                <div class="test-card">
                    <h3>Financial Calculator</h3>
                    <p>Test calculation performance on mobile</p>
                    <button class="test-button" onclick="runCalculatorTest()">Run Test</button>
                </div>
                
                <div class="test-card">
                    <h3>Image Loading</h3>
                    <p>Test image optimization and loading</p>
                    <button class="test-button" onclick="runImageTest()">Run Test</button>
                </div>
                
                <div class="test-card">
                    <h3>Offline Functionality</h3>
                    <p>Test offline capabilities</p>
                    <button class="test-button" onclick="runOfflineTest()">Run Test</button>
                </div>
                
                <div class="test-card">
                    <h3>Touch Performance</h3>
                    <p>Test touch response and interactions</p>
                    <button class="test-button" onclick="runTouchTest()">Run Test</button>
                </div>
                
                <div class="test-card">
                    <h3>Memory Usage</h3>
                    <p>Test memory consumption and leaks</p>
                    <button class="test-button" onclick="runMemoryTest()">Run Test</button>
                </div>
            </div>
        </div>

        <!-- Comprehensive Test -->
        <div class="test-section">
            <h2>üöÄ Comprehensive Performance Test</h2>
            <p>Run all tests with current network and device settings</p>
            <button class="test-button" onclick="runComprehensiveTest()" style="font-size: 16px; padding: 15px 30px;">
                Run Comprehensive Test Suite
            </button>
            <div class="progress-bar">
                <div class="progress-fill" id="test-progress" style="width: 0%"></div>
            </div>
        </div>

        <!-- Results Panel -->
        <div class="results-panel" id="results-panel" style="display: none;">
            <h2>üìà Test Results</h2>
            <div id="test-results"></div>
        </div>
    </div>

    <!-- Test Status Indicator -->
    <div class="test-status" id="test-status" style="display: none;">
        <div>
            <span class="status-indicator status-running" id="status-indicator"></span>
            <span id="status-text">Running tests...</span>
        </div>
    </div>

    <script>
        class MobilePerformanceTestSuite {
            constructor() {
                this.currentNetwork = '4g-fast';
                this.currentDevice = 'iphone-14';
                this.testResults = {};
                this.isRunning = false;
                
                this.networkProfiles = {
                    '4g-fast': { downlink: 10, rtt: 50, effectiveType: '4g' },
                    '4g-slow': { downlink: 2.5, rtt: 80, effectiveType: '4g' },
                    '3g-fast': { downlink: 1.5, rtt: 100, effectiveType: '3g' },
                    '3g-slow': { downlink: 0.75, rtt: 200, effectiveType: '3g' },
                    '2g': { downlink: 0.25, rtt: 300, effectiveType: '2g' }
                };
                
                this.deviceProfiles = {
                    'iphone-14': { ram: 6, processor: 'A15', capabilities: 'high' },
                    'iphone-8': { ram: 2, processor: 'A11', capabilities: 'medium' },
                    'samsung-s21': { ram: 8, processor: 'Snapdragon 888', capabilities: 'high' },
                    'samsung-a12': { ram: 3, processor: 'MediaTek Helio P35', capabilities: 'low' },
                    'pixel-4a': { ram: 6, processor: 'Snapdragon 730G', capabilities: 'medium' }
                };
                
                this.init();
            }

            init() {
                this.setupEventListeners();
                this.startRealTimeMonitoring();
                this.updateNetworkDisplay();
                this.updateDeviceDisplay();
            }

            setupEventListeners() {
                // Network selector
                document.querySelectorAll('.network-option').forEach(option => {
                    option.addEventListener('click', () => {
                        document.querySelectorAll('.network-option').forEach(opt => opt.classList.remove('active'));
                        option.classList.add('active');
                        this.currentNetwork = option.dataset.network;
                    });
                });

                // Device selector
                document.querySelectorAll('.device-option').forEach(option => {
                    option.addEventListener('click', () => {
                        document.querySelectorAll('.device-option').forEach(opt => opt.classList.remove('active'));
                        option.classList.add('active');
                        this.currentDevice = option.dataset.device;
                    });
                });
            }

            startRealTimeMonitoring() {
                // Monitor Core Web Vitals
                if ('PerformanceObserver' in window) {
                    const observer = new PerformanceObserver((list) => {
                        list.getEntries().forEach((entry) => {
                            this.updateMetric(entry.entryType, entry.startTime || entry.processingStart || entry.value);
                        });
                    });

                    observer.observe({ entryTypes: ['largest-contentful-paint', 'first-input', 'paint'] });
                }

                // Monitor FPS
                this.monitorFPS();

                // Monitor memory usage
                this.monitorMemory();

                // Monitor network
                this.monitorNetwork();
            }

            monitorFPS() {
                let frameCount = 0;
                let lastTime = performance.now();

                const countFrames = () => {
                    frameCount++;
                    const currentTime = performance.now();
                    
                    if (currentTime - lastTime >= 1000) {
                        const fps = Math.round((frameCount * 1000) / (currentTime - lastTime));
                        this.updateMetric('fps', fps);
                        
                        frameCount = 0;
                        lastTime = currentTime;
                    }
                    
                    requestAnimationFrame(countFrames);
                };

                requestAnimationFrame(countFrames);
            }

            monitorMemory() {
                if ('memory' in performance) {
                    setInterval(() => {
                        const usedMB = Math.round(performance.memory.usedJSHeapSize / 1024 / 1024);
                        this.updateMetric('memory', usedMB);
                    }, 2000);
                }
            }

            monitorNetwork() {
                const connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;
                if (connection) {
                    setInterval(() => {
                        const networkType = connection.effectiveType || 'unknown';
                        this.updateMetric('network', networkType);
                    }, 5000);
                }
            }

            updateMetric(type, value) {
                const elementMap = {
                    'largest-contentful-paint': 'lcp-value',
                    'first-input': 'fid-value',
                    'paint': 'cls-value',
                    'fps': 'fps-value',
                    'memory': 'memory-value',
                    'network': 'network-value'
                };

                const elementId = elementMap[type];
                if (elementId) {
                    const element = document.getElementById(elementId);
                    if (element) {
                        element.textContent = Math.round(value);
                    }
                }
            }

            simulateNetwork() {
                const profile = this.networkProfiles[this.currentNetwork];
                console.log(`Simulating network: ${this.currentNetwork}`, profile);
                
                // Simulate network conditions
                if (navigator.connection) {
                    Object.defineProperty(navigator.connection, 'downlink', {
                        get: () => profile.downlink
                    });
                    Object.defineProperty(navigator.connection, 'rtt', {
                        get: () => profile.rtt
                    });
                    Object.defineProperty(navigator.connection, 'effectiveType', {
                        get: () => profile.effectiveType
                    });
                }

                this.updateNetworkDisplay();
                this.showNotification(`Network set to ${this.currentNetwork}`);
            }

            simulateDevice() {
                const profile = this.deviceProfiles[this.currentDevice];
                console.log(`Simulating device: ${this.currentDevice}`, profile);
                
                // Apply device-specific optimizations
                document.body.className = `device-${profile.capabilities}`;
                
                this.updateDeviceDisplay();
                this.showNotification(`Device set to ${this.currentDevice}`);
            }

            updateNetworkDisplay() {
                const profile = this.networkProfiles[this.currentNetwork];
                document.getElementById('network-value').textContent = profile.effectiveType;
            }

            updateDeviceDisplay() {
                const profile = this.deviceProfiles[this.currentDevice];
                // Update device-specific UI elements
            }

            async runWebVitalsTest() {
                this.startTest('Web Vitals');
                
                try {
                    const results = await this.measureWebVitals();
                    this.testResults.webVitals = results;
                    this.completeTest('Web Vitals', results);
                } catch (error) {
                    this.failTest('Web Vitals', error);
                }
            }

            async runCalculatorTest() {
                this.startTest('Financial Calculator');
                
                try {
                    const results = await this.measureCalculatorPerformance();
                    this.testResults.calculator = results;
                    this.completeTest('Financial Calculator', results);
                } catch (error) {
                    this.failTest('Financial Calculator', error);
                }
            }

            async runImageTest() {
                this.startTest('Image Loading');
                
                try {
                    const results = await this.measureImagePerformance();
                    this.testResults.images = results;
                    this.completeTest('Image Loading', results);
                } catch (error) {
                    this.failTest('Image Loading', error);
                }
            }

            async runOfflineTest() {
                this.startTest('Offline Functionality');
                
                try {
                    const results = await this.measureOfflinePerformance();
                    this.testResults.offline = results;
                    this.completeTest('Offline Functionality', results);
                } catch (error) {
                    this.failTest('Offline Functionality', error);
                }
            }

            async runTouchTest() {
                this.startTest('Touch Performance');
                
                try {
                    const results = await this.measureTouchPerformance();
                    this.testResults.touch = results;
                    this.completeTest('Touch Performance', results);
                } catch (error) {
                    this.failTest('Touch Performance', error);
                }
            }

            async runMemoryTest() {
                this.startTest('Memory Usage');
                
                try {
                    const results = await this.measureMemoryPerformance();
                    this.testResults.memory = results;
                    this.completeTest('Memory Usage', results);
                } catch (error) {
                    this.failTest('Memory Usage', error);
                }
            }

            async runComprehensiveTest() {
                if (this.isRunning) return;
                
                this.isRunning = true;
                this.startTest('Comprehensive');
                
                const tests = [
                    this.runWebVitalsTest(),
                    this.runCalculatorTest(),
                    this.runImageTest(),
                    this.runOfflineTest(),
                    this.runTouchTest(),
                    this.runMemoryTest()
                ];

                let completed = 0;
                const total = tests.length;

                for (const test of tests) {
                    await test;
                    completed++;
                    this.updateProgress((completed / total) * 100);
                }

                this.completeComprehensiveTest();
                this.isRunning = false;
            }

            async measureWebVitals() {
                return new Promise((resolve) => {
                    const observer = new PerformanceObserver((list) => {
                        const entries = list.getEntries();
                        const metrics = {
                            lcp: entries.find(e => e.entryType === 'largest-contentful-paint')?.startTime,
                            fid: entries.find(e => e.entryType === 'first-input')?.processingStart,
                            cls: this.calculateCLS(entries)
                        };
                        
                        observer.disconnect();
                        resolve(metrics);
                    });

                    observer.observe({ entryTypes: ['largest-contentful-paint', 'first-input', 'paint'] });
                    
                    // Trigger some user interaction for FID
                    setTimeout(() => {
                        document.body.click();
                    }, 1000);
                });
            }

            async measureCalculatorPerformance() {
                const startTime = performance.now();
                
                // Simulate financial calculations
                const calculations = Array.from({ length: 1000 }, (_, i) => ({
                    salary: 50000 + (i * 100),
                    experience: i % 10,
                    industry: ['technology', 'healthcare', 'finance'][i % 3]
                }));

                // Use Web Worker if available
                if (typeof Worker !== 'undefined') {
                    return new Promise((resolve) => {
                        const worker = new Worker('/js/financial-calculator-worker.js');
                        
                        worker.onmessage = (event) => {
                            const endTime = performance.now();
                            worker.terminate();
                            
                            resolve({
                                duration: endTime - startTime,
                                calculations: calculations.length,
                                averageTime: (endTime - startTime) / calculations.length
                            });
                        };
                        
                        worker.postMessage({
                            type: 'salary-comparison',
                            data: calculations[0]
                        });
                    });
                } else {
                    // Fallback to main thread
                    const endTime = performance.now();
                    return {
                        duration: endTime - startTime,
                        calculations: calculations.length,
                        averageTime: (endTime - startTime) / calculations.length
                    };
                }
            }

            async measureImagePerformance() {
                const images = [
                    '/images/logo.webp',
                    '/images/hero.webp',
                    '/images/features.webp'
                ];

                const results = [];
                
                for (const src of images) {
                    const startTime = performance.now();
                    
                    return new Promise((resolve) => {
                        const img = new Image();
                        img.onload = () => {
                            const endTime = performance.now();
                            results.push({
                                src,
                                loadTime: endTime - startTime,
                                size: img.naturalWidth * img.naturalHeight
                            });
                            resolve(results);
                        };
                        img.onerror = () => {
                            results.push({
                                src,
                                loadTime: -1,
                                error: true
                            });
                            resolve(results);
                        };
                        img.src = src;
                    });
                }
            }

            async measureOfflinePerformance() {
                // Test service worker functionality
                const hasServiceWorker = 'serviceWorker' in navigator;
                const hasCache = 'caches' in window;
                const hasIndexedDB = 'indexedDB' in window;
                
                return {
                    serviceWorker: hasServiceWorker,
                    cache: hasCache,
                    indexedDB: hasIndexedDB,
                    offlineCapable: hasServiceWorker && hasCache
                };
            }

            async measureTouchPerformance() {
                const results = [];
                
                return new Promise((resolve) => {
                    const testElement = document.createElement('div');
                    testElement.style.position = 'absolute';
                    testElement.style.top = '50%';
                    testElement.style.left = '50%';
                    testElement.style.width = '100px';
                    testElement.style.height = '100px';
                    testElement.style.background = '#00d4aa';
                    document.body.appendChild(testElement);
                    
                    let touchCount = 0;
                    const maxTouches = 10;
                    
                    const handleTouch = (event) => {
                        const touchTime = performance.now();
                        results.push({
                            touchTime,
                            touchType: event.type
                        });
                        
                        touchCount++;
                        if (touchCount >= maxTouches) {
                            document.body.removeChild(testElement);
                            resolve({
                                touchCount: results.length,
                                averageResponseTime: this.calculateAverageResponseTime(results)
                            });
                        }
                    };
                    
                    testElement.addEventListener('touchstart', handleTouch);
                    testElement.addEventListener('touchend', handleTouch);
                    
                    // Simulate touches
                    setTimeout(() => {
                        for (let i = 0; i < maxTouches; i++) {
                            setTimeout(() => {
                                testElement.dispatchEvent(new TouchEvent('touchstart'));
                            }, i * 100);
                        }
                    }, 1000);
                });
            }

            async measureMemoryPerformance() {
                if ('memory' in performance) {
                    const initialMemory = performance.memory.usedJSHeapSize;
                    
                    // Perform memory-intensive operations
                    const arrays = [];
                    for (let i = 0; i < 100; i++) {
                        arrays.push(new Array(10000).fill(Math.random()));
                    }
                    
                    const finalMemory = performance.memory.usedJSHeapSize;
                    const memoryIncrease = finalMemory - initialMemory;
                    
                    // Clean up
                    arrays.length = 0;
                    
                    return {
                        initialMemory: Math.round(initialMemory / 1024 / 1024),
                        finalMemory: Math.round(finalMemory / 1024 / 1024),
                        memoryIncrease: Math.round(memoryIncrease / 1024 / 1024),
                        memoryLeak: memoryIncrease > 1024 * 1024 // 1MB threshold
                    };
                }
                
                return { error: 'Memory API not available' };
            }

            calculateCLS(entries) {
                let cls = 0;
                entries.forEach(entry => {
                    if (entry.entryType === 'paint' && entry.name === 'first-contentful-paint') {
                        // Calculate layout shift
                        cls += 0.01; // Simplified calculation
                    }
                });
                return cls;
            }

            calculateAverageResponseTime(results) {
                if (results.length < 2) return 0;
                
                let totalTime = 0;
                for (let i = 1; i < results.length; i++) {
                    totalTime += results[i].touchTime - results[i-1].touchTime;
                }
                
                return totalTime / (results.length - 1);
            }

            startTest(testName) {
                this.showTestStatus(`Running ${testName} test...`, 'running');
            }

            completeTest(testName, results) {
                this.showTestStatus(`${testName} test completed`, 'complete');
                this.addTestResult(testName, results);
            }

            failTest(testName, error) {
                this.showTestStatus(`${testName} test failed`, 'error');
                this.addTestResult(testName, { error: error.message });
            }

            completeComprehensiveTest() {
                this.showTestStatus('All tests completed', 'complete');
                this.displayResults();
            }

            showTestStatus(message, status) {
                const statusElement = document.getElementById('test-status');
                const indicator = document.getElementById('status-indicator');
                const text = document.getElementById('status-text');
                
                statusElement.style.display = 'block';
                text.textContent = message;
                
                indicator.className = `status-indicator status-${status}`;
                
                if (status === 'complete' || status === 'error') {
                    setTimeout(() => {
                        statusElement.style.display = 'none';
                    }, 3000);
                }
            }

            updateProgress(percentage) {
                document.getElementById('test-progress').style.width = `${percentage}%`;
            }

            addTestResult(testName, results) {
                this.testResults[testName] = results;
            }

            displayResults() {
                const resultsPanel = document.getElementById('results-panel');
                const resultsContainer = document.getElementById('test-results');
                
                let html = '';
                
                for (const [testName, results] of Object.entries(this.testResults)) {
                    html += `<h3>${testName}</h3>`;
                    
                    if (results.error) {
                        html += `<div class="metric"><span class="metric-label">Error:</span><span class="metric-value">${results.error}</span></div>`;
                    } else {
                        for (const [key, value] of Object.entries(results)) {
                            const status = this.getMetricStatus(testName, key, value);
                            html += `
                                <div class="metric">
                                    <span class="metric-label">${key}:</span>
                                    <span class="metric-value">${this.formatValue(value)}</span>
                                    <span class="metric-status status-${status}">${status}</span>
                                </div>
                            `;
                        }
                    }
                }
                
                resultsContainer.innerHTML = html;
                resultsPanel.style.display = 'block';
            }

            getMetricStatus(testName, key, value) {
                const thresholds = {
                    'lcp': { good: 2500, poor: 4000 },
                    'fid': { good: 100, poor: 300 },
                    'cls': { good: 0.1, poor: 0.25 },
                    'fps': { good: 50, poor: 30 },
                    'duration': { good: 1000, poor: 3000 }
                };
                
                const threshold = thresholds[key];
                if (!threshold) return 'unknown';
                
                if (value <= threshold.good) return 'good';
                if (value <= threshold.poor) return 'warning';
                return 'poor';
            }

            formatValue(value) {
                if (typeof value === 'number') {
                    return value.toFixed(2);
                }
                if (typeof value === 'boolean') {
                    return value ? 'Yes' : 'No';
                }
                return value;
            }

            showNotification(message) {
                // Simple notification
                console.log(message);
            }
        }

        // Initialize test suite
        const testSuite = new MobilePerformanceTestSuite();

        // Global functions for button clicks
        function simulateNetwork() {
            testSuite.simulateNetwork();
        }

        function simulateDevice() {
            testSuite.simulateDevice();
        }

        function runWebVitalsTest() {
            testSuite.runWebVitalsTest();
        }

        function runCalculatorTest() {
            testSuite.runCalculatorTest();
        }

        function runImageTest() {
            testSuite.runImageTest();
        }

        function runOfflineTest() {
            testSuite.runOfflineTest();
        }

        function runTouchTest() {
            testSuite.runTouchTest();
        }

        function runMemoryTest() {
            testSuite.runMemoryTest();
        }

        function runComprehensiveTest() {
            testSuite.runComprehensiveTest();
        }
    </script>
</body>
</html>
