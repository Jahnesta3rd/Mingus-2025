from supabase import create_client, Clientfrom generate_schedule import generate_scheduleimport os# --- Configuration ---SUPABASE_URL = os.getenv("SUPABASE_URL")SUPABASE_KEY = os.getenv("SUPABASE_SERVICE_KEY")  # Use service role key for insertssupabase: Client = create_client(SUPABASE_URL, SUPABASE_KEY)def insert_forecast_dates(user_id, reference_id, name, frequency, start_date, amount, event_type):    try:        # Step 1: Generate the list of future dates        dates = generate_schedule(start_date, frequency)        inserts = []        # Step 2: Build each row to insert into the forecast_calendar table        for d in dates:            inserts.append({                "user_id": user_id,                "reference_id": reference_id,                "due_date": d,                "amount": amount,                "event_type": event_type            })        # Step 3: Insert the list of events into Supabase        response = supabase.table("forecast_calendar").insert(inserts).execute()        return response.data    except Exception as e:        print("Error inserting forecast dates:", e)        return None