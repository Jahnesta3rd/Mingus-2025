# =====================================================
# MINGUS APPLICATION - SECURE ENVIRONMENT TEMPLATE
# =====================================================
# 
# COPY THIS FILE TO .env AND FILL IN YOUR ACTUAL VALUES
# NEVER COMMIT THE .env FILE TO VERSION CONTROL
#
# This template contains ALL environment variables needed for the Mingus application
# Each variable includes a detailed description of its purpose and requirements
# =====================================================

# =====================================================
# FLASK APPLICATION CONFIGURATION
# =====================================================

# Flask secret key for session management and CSRF protection
# Generate a secure random key: python -c "import secrets; print(secrets.token_hex(32))"
SECRET_KEY=your-secret-key-change-in-production

# Flask environment (development, testing, production)
FLASK_ENV=development

# Debug mode (set to false in production)
DEBUG=false

# Application port
PORT=5002

# =====================================================
# DATABASE CONFIGURATION
# =====================================================

# Database connection URL
# Format: postgresql://username:password@host:port/database
# For SQLite: sqlite:///instance/mingus.db
DATABASE_URL=postgresql://mingus_user:mingus_password@localhost:5432/mingus_production

# Database connection pool settings
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=30
DB_POOL_RECYCLE=3600
DB_POOL_TIMEOUT=30

# Database SSL configuration
DB_SSL_MODE=prefer
DB_SSL_CERT=
DB_SSL_KEY=
DB_SSL_CA=
DB_SSL_CRL=

# Database performance settings
DB_STATEMENT_TIMEOUT=30000
DB_IDLE_TIMEOUT=60000
DB_LOCK_TIMEOUT=10000

# Database logging and monitoring
DB_ENABLE_QUERY_LOGGING=false
DB_SLOW_QUERY_THRESHOLD=1.0
DB_ENABLE_CONNECTION_MONITORING=true

# Database backup settings
DB_BACKUP_ENABLED=true
DB_BACKUP_SCHEDULE=0 2 * * *
DB_BACKUP_RETENTION_DAYS=30
DB_BACKUP_LOCATION=backups/database/

# Database security settings
DB_ENABLE_RLS=true
DB_ENABLE_AUDIT=true
DB_AUDIT_RETENTION=90

# Database health check settings
DB_HEALTH_CHECK_INTERVAL=300
DB_HEALTH_CHECK_TIMEOUT=10
DB_MAX_RETRY_ATTEMPTS=3
DB_RETRY_DELAY=5

# Database logging
DB_LOG_LEVEL=WARNING
DB_LOG_FILE=logs/database.log

# =====================================================
# REDIS CONFIGURATION
# =====================================================

# Redis connection URL
# Format: redis://username:password@host:port/database
REDIS_URL=redis://localhost:6379/0

# Redis connection details (if not using URL)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=

# Redis cache settings
REDIS_CACHE_TIMEOUT=3600

# =====================================================
# ENCRYPTION & SECURITY KEYS
# =====================================================

# Field-level encryption key (32 bytes for AES-256)
# Generate: python -c "import secrets; print(secrets.token_hex(32))"
FIELD_ENCRYPTION_KEY=your-field-encryption-key-here

# Django secret key for django-encrypted-model-fields compatibility
# Generate: python -c "import secrets; print(secrets.token_hex(50))"
DJANGO_SECRET_KEY=your-django-secret-key-here

# General encryption key (fallback to FIELD_ENCRYPTION_KEY if not set)
ENCRYPTION_KEY=

# =====================================================
# SUPABASE CONFIGURATION
# =====================================================

# Supabase project URL
SUPABASE_URL=https://your-project.supabase.co

# Supabase API keys
SUPABASE_KEY=your-supabase-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-supabase-service-role-key
SUPABASE_JWT_SECRET=your-supabase-jwt-secret

# =====================================================
# STRIPE PAYMENT CONFIGURATION
# =====================================================

# Stripe environment (test or live)
STRIPE_ENVIRONMENT=test

# Stripe API keys - Test Environment
STRIPE_TEST_SECRET_KEY=sk_test_your_test_secret_key
STRIPE_TEST_PUBLISHABLE_KEY=pk_test_your_test_publishable_key
STRIPE_TEST_WEBHOOK_SECRET=whsec_your_test_webhook_secret

# Stripe API keys - Live Environment
STRIPE_LIVE_SECRET_KEY=sk_live_your_live_secret_key
STRIPE_LIVE_PUBLISHABLE_KEY=pk_live_your_live_publishable_key
STRIPE_LIVE_WEBHOOK_SECRET=whsec_your_live_webhook_secret

# Stripe webhook endpoints
STRIPE_TEST_WEBHOOK_ENDPOINT=https://your-test-domain.com/api/payment/webhooks/stripe
STRIPE_LIVE_WEBHOOK_ENDPOINT=https://your-live-domain.com/api/payment/webhooks/stripe

# Stripe price IDs - Test Environment
STRIPE_TEST_BUDGET_MONTHLY_PRICE_ID=price_test_budget_monthly
STRIPE_TEST_BUDGET_YEARLY_PRICE_ID=price_test_budget_yearly
STRIPE_TEST_MID_TIER_MONTHLY_PRICE_ID=price_test_mid_tier_monthly
STRIPE_TEST_MID_TIER_YEARLY_PRICE_ID=price_test_mid_tier_yearly
STRIPE_TEST_PROFESSIONAL_MONTHLY_PRICE_ID=price_test_professional_monthly
STRIPE_TEST_PROFESSIONAL_YEARLY_PRICE_ID=price_test_professional_yearly

# Stripe price IDs - Live Environment
STRIPE_LIVE_BUDGET_MONTHLY_PRICE_ID=price_live_budget_monthly
STRIPE_LIVE_BUDGET_YEARLY_PRICE_ID=price_live_budget_yearly
STRIPE_LIVE_MID_TIER_MONTHLY_PRICE_ID=price_live_mid_tier_monthly
STRIPE_LIVE_MID_TIER_YEARLY_PRICE_ID=price_live_mid_tier_yearly
STRIPE_LIVE_PROFESSIONAL_MONTHLY_PRICE_ID=price_live_professional_monthly
STRIPE_LIVE_PROFESSIONAL_YEARLY_PRICE_ID=price_live_professional_yearly

# Stripe configuration
STRIPE_API_VERSION=2023-10-16
STRIPE_CURRENCY=usd
STRIPE_TRIAL_DAYS=7
STRIPE_GRACE_PERIOD_DAYS=3
STRIPE_PAYMENT_BEHAVIOR=default_incomplete
STRIPE_ENABLE_3D_SECURE=true
STRIPE_REQUIRE_CAPTURE=false

# Stripe automatic tax configuration
STRIPE_AUTOMATIC_TAX_ENABLED=false

# Stripe logging
STRIPE_TEST_LOG_LEVEL=DEBUG
STRIPE_TEST_DEBUG=true

# =====================================================
# PLAID BANKING INTEGRATION CONFIGURATION
# =====================================================

# Plaid environment (sandbox, development, production)
PLAID_ENVIRONMENT=sandbox

# Plaid API credentials - Sandbox Environment
PLAID_SANDBOX_CLIENT_ID=your_sandbox_client_id
PLAID_SANDBOX_SECRET=your_sandbox_secret

# Plaid API credentials - Development Environment
PLAID_DEVELOPMENT_CLIENT_ID=your_development_client_id
PLAID_DEVELOPMENT_SECRET=your_development_secret

# Plaid API credentials - Production Environment
PLAID_PRODUCTION_CLIENT_ID=your_production_client_id
PLAID_PRODUCTION_SECRET=your_production_secret

# Plaid webhook URLs
PLAID_SANDBOX_WEBHOOK_URL=https://your-dev-domain.com/api/plaid/webhook
PLAID_DEVELOPMENT_WEBHOOK_URL=https://your-dev-domain.com/api/plaid/webhook
PLAID_PRODUCTION_WEBHOOK_URL=https://your-live-domain.com/api/plaid/webhook

# Plaid webhook secrets
PLAID_SANDBOX_WEBHOOK_SECRET=your_sandbox_webhook_secret
PLAID_DEVELOPMENT_WEBHOOK_SECRET=your_development_webhook_secret
PLAID_PRODUCTION_WEBHOOK_SECRET=your_production_webhook_secret

# Plaid access token encryption key
PLAID_ACCESS_TOKEN_ENCRYPTION_KEY=your_plaid_encryption_key

# =====================================================
# EMAIL CONFIGURATION
# =====================================================

# Email provider (resend, gmail, sendgrid)
EMAIL_PROVIDER=resend

# Resend email service configuration
RESEND_API_KEY=your_resend_api_key
RESEND_FROM_EMAIL=noreply@mingusapp.com
RESEND_FROM_NAME=MINGUS Financial Wellness
RESEND_WEBHOOK_SECRET=your_resend_webhook_secret

# Gmail SMTP configuration (alternative)
MAIL_SERVER=smtp.gmail.com
MAIL_PORT=587
MAIL_USE_TLS=true
MAIL_USERNAME=your_gmail_username
MAIL_PASSWORD=your_gmail_app_password
MAIL_DEFAULT_SENDER=your_gmail_address

# SendGrid configuration (alternative)
SENDGRID_API_KEY=your_sendgrid_api_key
SENDGRID_FROM_EMAIL=noreply@mingusapp.com
SENDGRID_FROM_NAME=MINGUS Financial Wellness

# =====================================================
# SMS CONFIGURATION (TWILIO)
# =====================================================

# Twilio API credentials
TWILIO_ACCOUNT_SID=your_twilio_account_sid
TWILIO_AUTH_TOKEN=your_twilio_auth_token
TWILIO_PHONE_NUMBER=+1234567890
TWILIO_WEBHOOK_SECRET=your_twilio_webhook_secret

# Twilio configuration
TWILIO_TIMEOUT=30
TWILIO_MAX_RETRIES=3
TWILIO_RETRY_DELAY=5

# SMS rate limits
SMS_CRITICAL_RATE_LIMIT=500
SMS_NORMAL_RATE_LIMIT=100
SMS_DAILY_RATE_LIMIT=10000
SMS_HOURLY_RATE_LIMIT=1000

# SMS cost tracking
SMS_COST_PER_MESSAGE=0.05
SMS_COST_PER_MMS=0.10

# =====================================================
# CELERY TASK QUEUE CONFIGURATION
# =====================================================

# Celery broker and backend (Redis)
CELERY_BROKER_URL=redis://localhost:6379/0
CELERY_RESULT_BACKEND=redis://localhost:6379/0

# Celery task configuration
CELERY_ALWAYS_EAGER=false
CELERY_TASK_TIME_LIMIT=1800
CELERY_TASK_SOFT_TIME_LIMIT=1500
CELERY_WORKER_MAX_TASKS_PER_CHILD=1000
CELERY_RESULT_EXPIRES=3600

# =====================================================
# COMMUNICATION SYSTEM CONFIGURATION
# =====================================================

# Communication budgets
COMMUNICATION_DAILY_BUDGET=100.0
COMMUNICATION_MONTHLY_BUDGET=3000.0
COMMUNICATION_ALERT_THRESHOLD=0.8

# User communication limits
USER_DAILY_COMM_LIMIT=5
USER_HOURLY_COMM_LIMIT=2
USER_WEEKLY_COMM_LIMIT=20
USER_MONTHLY_COMM_LIMIT=80
USER_SMS_DAILY_LIMIT=3
USER_EMAIL_DAILY_LIMIT=2

# Email rate limits
EMAIL_CRITICAL_RATE_LIMIT=1000
EMAIL_NORMAL_RATE_LIMIT=200
EMAIL_DAILY_RATE_LIMIT=50000
EMAIL_HOURLY_RATE_LIMIT=5000
EMAIL_COST_PER_MESSAGE=0.001

# Email configuration
EMAIL_MAX_RECIPIENTS=100
EMAIL_MAX_ATTACHMENT_SIZE=10485760

# =====================================================
# FRONTEND & API CONFIGURATION
# =====================================================

# Frontend URL
FRONTEND_URL=https://mingusapp.com

# API base URL
API_BASE_URL=https://api.mingusapp.com

# CORS origins (comma-separated)
CORS_ORIGINS=http://localhost:3000,https://mingusapp.com,https://www.mingusapp.com

# =====================================================
# SECURITY CONFIGURATION
# =====================================================

# SSL/HTTPS settings
SECURE_SSL_REDIRECT=true
SECURE_HSTS_SECONDS=31536000
SECURE_HSTS_INCLUDE_SUBDOMAINS=true
SECURE_HSTS_PRELOAD=true
SECURE_CONTENT_TYPE_NOSNIFF=true
SECURE_BROWSER_XSS_FILTER=true
SECURE_FRAME_DENY=true

# Session security
SESSION_COOKIE_SECURE=true
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE=Strict
SESSION_COOKIE_MAX_AGE=3600
PERMANENT_SESSION_LIFETIME=3600

# CSRF protection
WTF_CSRF_ENABLED=true
WTF_CSRF_TIME_LIMIT=3600

# Rate limiting
RATELIMIT_ENABLED=true
RATELIMIT_STORAGE_URL=memory://
RATELIMIT_DEFAULT=100 per minute
RATELIMIT_STRATEGY=fixed-window

# =====================================================
# MONITORING & LOGGING CONFIGURATION
# =====================================================

# Logging settings
LOG_LEVEL=INFO
LOG_FORMAT={time:YYYY-MM-DD HH:mm:ss} | {level} | {name}:{function}:{line} | {message}
LOG_ROTATION=1 day
LOG_RETENTION=30 days
LOG_FILE=logs/mingus.log

# Audit logging
AUDIT_LOG_ENABLED=true
AUDIT_LOG_RETENTION_DAYS=90

# Performance monitoring
ENABLE_PERFORMANCE_MONITORING=true
ENABLE_ERROR_TRACKING=true
ENABLE_USAGE_ANALYTICS=true

# =====================================================
# FEATURE FLAGS
# =====================================================

# Core features
ENABLE_ONBOARDING=true
ENABLE_USER_PROFILES=true
ENABLE_ENCRYPTION=true
ENABLE_AUDIT_LOGGING=true
BYPASS_AUTH=false

# Advanced features
ENABLE_ADVANCED_ANALYTICS=false
ENABLE_SOCIAL_SHARING=false
ENABLE_EXPORT_FUNCTIONALITY=false

# =====================================================
# DEPLOYMENT CONFIGURATION
# =====================================================

# Deployment environment
DEPLOYMENT_ENVIRONMENT=development

# Worker configuration
WORKERS=1
THREADS=4
MAX_REQUESTS=1000
MAX_REQUESTS_JITTER=100

# File upload settings
MAX_CONTENT_LENGTH=16777216
UPLOAD_FOLDER=uploads

# Cache settings
CACHE_TYPE=simple
CACHE_DEFAULT_TIMEOUT=300

# =====================================================
# EXTERNAL SERVICE INTEGRATIONS
# =====================================================

# Census API for demographic data
CENSUS_API_KEY=your_census_api_key
CENSUS_API_ENABLED=false

# Google Analytics
GOOGLE_ANALYTICS_ID=your_google_analytics_id
GOOGLE_ANALYTICS_ENABLED=false

# Sentry error tracking
SENTRY_DSN=your_sentry_dsn
SENTRY_ENVIRONMENT=development
SENTRY_ENABLED=false

# =====================================================
# DEVELOPMENT & TESTING CONFIGURATION
# =====================================================

# Test database URL
TEST_DATABASE_URL=sqlite:///test_mingus.db

# Test email configuration
TEST_EMAIL_ENABLED=false
TEST_EMAIL_ADDRESS=test@example.com

# Mock external services for testing
MOCK_STRIPE=false
MOCK_PLAID=false
MOCK_TWILIO=false
MOCK_RESEND=false

# =====================================================
# BACKUP & RECOVERY CONFIGURATION
# =====================================================

# Backup settings
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_LOCATION=backups/

# Recovery settings
RECOVERY_ENABLED=true
RECOVERY_EMAIL=admin@mingusapp.com

# =====================================================
# SUPPORT & CONTACT INFORMATION
# =====================================================

# Support contact
MINGUS_SUPPORT_PHONE=+1-800-MINGUS-1
MINGUS_SUPPORT_EMAIL=support@mingusapp.com

# Admin contact
ADMIN_EMAIL=admin@mingusapp.com
ADMIN_PHONE=+1-800-MINGUS-1

# =====================================================
# NOTES & WARNINGS
# =====================================================
#
# IMPORTANT SECURITY NOTES:
# 1. NEVER commit this .env file to version control
# 2. Use strong, unique passwords for all services
# 3. Rotate secrets regularly (every 90 days)
# 4. Use environment-specific keys (test vs live)
# 5. Enable 2FA on all external service accounts
# 6. Monitor for suspicious activity
# 7. Keep all dependencies updated
# 8. Use HTTPS in production
# 9. Implement proper access controls
# 10. Regular security audits
#
# DEPLOYMENT CHECKLIST:
# 1. Copy this template to .env
# 2. Fill in all required values
# 3. Test configuration in development
# 4. Validate all external service connections
# 5. Test backup and recovery procedures
# 6. Verify security settings
# 7. Monitor application logs
# 8. Set up monitoring and alerting
#
# ===================================================== 

# =====================================================
# DEVELOPMENT-SPECIFIC CONFIGURATION
# =====================================================

# Development session settings
DEV_SESSION_COOKIE_SAMESITE=Lax
DEV_LOG_LEVEL=DEBUG
DEV_RATELIMIT_DEFAULT=1000 per minute
DEV_CACHE_TYPE=simple
DEV_API_TITLE=Mingus Personal Finance API (Development)
DEV_API_VERSION=v1
DEV_API_DESCRIPTION=Development API for Mingus personal finance application
DEV_UPLOAD_FOLDER=uploads/development
DEV_BACKUP_SCHEDULE=0 2 * * *
DEV_BACKUP_LOCATION=backups/development/

# =====================================================
# TESTING-SPECIFIC CONFIGURATION
# =====================================================

# Testing session settings
TEST_SESSION_COOKIE_SAMESITE=Lax
TEST_STRIPE_ENVIRONMENT=test
TEST_PLAID_ENVIRONMENT=sandbox
TEST_EMAIL_PROVIDER=resend
TEST_RATELIMIT_DEFAULT=10000 per minute
TEST_CACHE_TYPE=simple
TEST_API_TITLE=Mingus Personal Finance API (Testing)
TEST_API_VERSION=v1
TEST_API_DESCRIPTION=Testing API for Mingus personal finance application
TEST_UPLOAD_FOLDER=uploads/testing
TEST_BACKUP_SCHEDULE=0 0 * * *
TEST_BACKUP_LOCATION=backups/testing/
TEST_LOG_LEVEL=DEBUG
TEST_LOG_FORMAT={time:YYYY-MM-DD HH:mm:ss} | {level} | {name}:{function}:{line} | {message}
TEST_LOG_ROTATION=1 hour
TEST_LOG_RETENTION=1 day
TEST_LOG_FILE=logs/mingus_testing.log

# =====================================================
# PRODUCTION-SPECIFIC CONFIGURATION
# =====================================================

# Production session settings
PROD_SESSION_COOKIE_SAMESITE=Strict
PROD_RATELIMIT_DEFAULT=20 per minute
PROD_RATELIMIT_STRATEGY=fixed-window
PROD_LOG_LEVEL=INFO
PROD_LOG_FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s
PROD_LOG_FILE=logs/mingus_production.log
PROD_LOG_ROTATION=1 day
PROD_LOG_RETENTION=30 days
PROD_STATIC_FOLDER=static
PROD_STATIC_URL_PATH=/static
PROD_TEMPLATE_FOLDER=templates
PROD_UPLOAD_FOLDER=uploads/production
PROD_API_TITLE=Mingus Personal Finance API (Production)
PROD_API_VERSION=v1
PROD_API_DESCRIPTION=Production API for Mingus personal finance application
PROD_BACKUP_SCHEDULE=0 2 * * *
PROD_BACKUP_RETENTION_DAYS=30
PROD_BACKUP_LOCATION=backups/production/
PROD_METRICS_RETENTION_DAYS=90
PROD_RESPONSE_TIME_THRESHOLD=2000
PROD_ERROR_RATE_THRESHOLD=1.0
PROD_MEMORY_USAGE_THRESHOLD=80.0
PROD_CPU_USAGE_THRESHOLD=80.0
PROD_HOST=0.0.0.0
PROD_PORT=5000
PROD_WORKERS=4
PROD_THREADS=2
PROD_MAX_REQUESTS=1000
PROD_MAX_REQUESTS_JITTER=100
PROD_WORKER_CLASS=gthread
PROD_MAX_CACHE_SIZE_MB=500
PROD_CACHE_CLEANUP_INTERVAL=3600
PROD_MAX_CONCURRENT_ANALYSES=10
PROD_METRICS_EXPORT_INTERVAL=300
PROD_MAX_RESPONSE_TIME_MS=2000
PROD_MAX_MEMORY_USAGE_MB=1000
PROD_MAX_CPU_USAGE_PERCENT=80.0

# =====================================================
# CELERY CONFIGURATION
# =====================================================

# Celery task settings
CELERY_TASK_SERIALIZER=json
CELERY_ACCEPT_CONTENT=json
CELERY_RESULT_SERIALIZER=json
CELERY_TIMEZONE=UTC
CELERY_TASK_DEFAULT_QUEUE=default
CELERY_TASK_DEFAULT_EXCHANGE=default
CELERY_TASK_DEFAULT_ROUTING_KEY=default

# =====================================================
# WEBHOOK CONFIGURATION
# =====================================================

# Webhook logging
WEBHOOK_LOG_FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s
MESSAGE_MAPPING_TABLE=message_external_ids

# =====================================================
# CACHE CONFIGURATION
# =====================================================

# Cache settings
CACHE_KEY_PREFIX=mingus_
RATELIMIT_STORAGE_URL=memory://

# =====================================================
# LOGGING CONFIGURATION
# =====================================================

# Logging settings
LOG_FORMAT={time:YYYY-MM-DD HH:mm:ss} | {level} | {name}:{function}:{line} | {message}
LOG_ROTATION=1 day
LOG_RETENTION=30 days
LOG_FILE=logs/mingus.log

# =====================================================
# SESSION CONFIGURATION
# =====================================================

# Session settings
SESSION_COOKIE_SAMESITE=Strict
SESSION_LIFETIME_HOURS=24

# =====================================================
# API CONFIGURATION
# =====================================================

# API settings
API_TITLE=Mingus Personal Finance API
API_VERSION=v1
API_DESCRIPTION=API for Mingus personal finance application

# =====================================================
# SECURITY CONFIGURATION
# =====================================================

# Security settings
ENCRYPTION_ALGORITHM=AES-256-GCM
SECURE_HSTS_SECONDS=31536000
SECURE_HSTS_INCLUDE_SUBDOMAINS=true
SECURE_HSTS_PRELOAD=true
SECURE_CONTENT_TYPE_NOSNIFF=true
SECURE_BROWSER_XSS_FILTER=true
SECURE_FRAME_DENY=true

# =====================================================
# FILE UPLOAD CONFIGURATION
# =====================================================

# File upload settings
MAX_CONTENT_LENGTH=16777216

# =====================================================
# STATIC FILES CONFIGURATION
# =====================================================

# Static files settings
STATIC_FOLDER=static
STATIC_URL_PATH=/static

# =====================================================
# TEMPLATE CONFIGURATION
# =====================================================

# Template settings
TEMPLATE_FOLDER=templates

# =====================================================
# MONITORING CONFIGURATION
# =====================================================

# Monitoring settings
ENABLE_PERFORMANCE_MONITORING=true
ENABLE_ERROR_TRACKING=true
ENABLE_USAGE_ANALYTICS=true 